<!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://dokku.com/docs/development/plugin-triggers/">
      
      <link rel="icon" href="../../assets/favicons/favicon-96x96.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.2">
    
    
      
        <title>Plugin triggers - Dokku Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M248.8 4.994C249.9 1.99 252.8 0 256 0s6.1 1.99 7.2 4.994l14.1 37.676L315 56.79c3 1.13 5 4 5 7.21s-2 6.08-5 7.21l-37.7 14.12L263.2 123c-1.1 3-4 5-7.2 5s-6.1-2-7.2-5l-14.1-37.67-38.6-14.12c-3-1.13-4.1-4-4.1-7.21s1.1-6.08 4.1-7.21l38.6-14.12 14.1-37.676zm178.6 9.066c18.8-18.746 49.2-18.746 67.9 0l34.6 34.58c18.7 18.74 18.7 49.14 0 67.86L148.5 497.9c-18.7 18.7-49.12 18.7-67.86 0l-34.58-34.6c-18.75-18.7-18.75-49.1 0-67.9L427.4 14.06zm34 45.25L356.3 164.3l23.3 23.3 105-105.02-23.2-23.27zM7.491 117.2 64 96l21.19-56.51C86.88 34.98 91.19 32 96 32c4.8 0 9.1 2.98 10.8 7.49L128 96l56.5 21.2c4.5 1.7 7.5 6 7.5 10.8 0 4.8-3 9.1-7.5 10.8L128 160l-21.2 56.5c-1.7 4.5-6 7.5-10.8 7.5-4.81 0-9.12-3-10.81-7.5L64 160 7.491 138.8C2.985 137.1 0 132.8 0 128c0-4.8 2.985-9.1 7.491-10.8zm352.009 256L416 352l21.2-56.5c1.7-5.4 6-7.5 10.8-7.5 4.8 0 9.1 2.1 10.8 7.5L480 352l56.5 21.2c4.5 1.7 7.5 6 7.5 10.8 0 4.8-3 9.1-7.5 10.8L480 416l-21.2 56.5c-1.7 4.5-6 7.5-10.8 7.5-4.8 0-9.1-3-10.8-7.5L416 416l-56.5-21.2c-5.4-1.7-7.5-6-7.5-10.8 0-4.8 2.1-9.1 7.5-10.8z"/></svg>');}</style>

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    

  <!-- Extra style sheets (can't be set in mkdocs.yml due to content hash) -->
  <link
    rel="stylesheet"
    href="../../overrides/assets/stylesheets/main.css"
  />

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#plugin-triggers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  <a href="https://twitter.com/dokku">
    For updates follow <strong>@dokku</strong> on
    <span class="twemoji twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </span>
    <strong>Twitter</strong>
  </a>

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Dokku Documentation" class="md-header__button md-logo" aria-label="Dokku Documentation" data-md-component="logo">
      
  <img src="../../assets/dokku-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dokku Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Plugin triggers
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dokku/dokku" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/installation/" class="md-tabs__link md-tabs__link--active">
        Docs
      </a>
    </li>
  

  

  

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://pro.dokku.com/docs/getting-started/" class="md-tabs__link">
      Pro
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://pro.dokku.com/blog/" class="md-tabs__link">
      Blog
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://dokku.dpdcart.com/cart/add?product_id=217344&method_id=236878" class="md-tabs__link">
      Purchase Dokku Pro
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Dokku Documentation" class="md-nav__button md-logo" aria-label="Dokku Documentation" data-md-component="logo">
      
  <img src="../../assets/dokku-logo.svg" alt="logo">

    </a>
    Dokku Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dokku/dokku" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1">
          Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_1">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_1" type="checkbox" id="__nav_1_1_1" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_1_1">
          Getting Started with Dokku
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started with Dokku" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started with Dokku
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        Getting Started with Dokku
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/advanced-installation/" class="md-nav__link">
        Advanced installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/azure/" class="md-nav__link">
        Microsoft Azure Installation Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/debian/" class="md-nav__link">
        Debian Package Installation Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/digitalocean/" class="md-nav__link">
        DigitalOcean Droplet Installation Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/docker/" class="md-nav__link">
        Docker Installation Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/dreamhost/" class="md-nav__link">
        DreamHost Cloud Server Installation Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/rpm/" class="md-nav__link">
        RPM Package Installation Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/vagrant/" class="md-nav__link">
        Vagrant Installation Notes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_2" type="checkbox" id="__nav_1_1_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_1_2">
          Upgrading
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Upgrading" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          Upgrading
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/upgrading/" class="md-nav__link">
        Upgrading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.22.0-migration-guide/" class="md-nav__link">
        0.22.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.21.0-migration-guide/" class="md-nav__link">
        0.21.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.20.0-migration-guide/" class="md-nav__link">
        0.20.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.10.0-migration-guide/" class="md-nav__link">
        0.10.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.9.0-migration-guide/" class="md-nav__link">
        0.9.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.8.0-migration-guide/" class="md-nav__link">
        0.8.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.7.0-migration-guide/" class="md-nav__link">
        0.7.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.6.0-migration-guide/" class="md-nav__link">
        0.6.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.5.0-migration-guide/" class="md-nav__link">
        0.5.0 Migration Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/uninstalling/" class="md-nav__link">
        Uninstalling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/where-to-get-help/" class="md-nav__link">
        Where to Get Help
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deployment" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/application-deployment/" class="md-nav__link">
        Deploying to Dokku
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/application-management/" class="md-nav__link">
        Application Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/logs/" class="md-nav__link">
        Log Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/remote-commands/" class="md-nav__link">
        Remote Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/one-off-processes/" class="md-nav__link">
        One-off Processes and Cron
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/process-management/" class="md-nav__link">
        Process and Container Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/user-management/" class="md-nav__link">
        User Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/zero-downtime-deploys/" class="md-nav__link">
        Zero Downtime Deploys
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_3">
          Deployment Methods
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deployment Methods" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          Deployment Methods
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/methods/cloud-native-buildpacks/" class="md-nav__link">
        Cloud Native Buildpacks (Experimental)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/methods/herokuish-buildpacks/" class="md-nav__link">
        Herokuish Buildpack Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/methods/dockerfiles/" class="md-nav__link">
        Dockerfile Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/methods/images/" class="md-nav__link">
        Docker Image Tag Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/methods/git/" class="md-nav__link">
        Git Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/methods/tar/" class="md-nav__link">
        Tarball Deployment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_4">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/environment-variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/domains/" class="md-nav__link">
        Domain Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/nginx/" class="md-nav__link">
        Nginx Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/ssl/" class="md-nav__link">
        SSL Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_5">
          Network Management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Network Management" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          Network Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/dns/" class="md-nav__link">
        DNS Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/network/" class="md-nav__link">
        Network Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/port-management/" class="md-nav__link">
        Port Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/proxy-management/" class="md-nav__link">
        Proxy Management
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_6">
          Advanced Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced Usage" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          Advanced Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/backup-recovery/" class="md-nav__link">
        Backup and Recovery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/deployment-tasks/" class="md-nav__link">
        Deployment Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/docker-options/" class="md-nav__link">
        Docker Container Options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/event-logs/" class="md-nav__link">
        Dokku Event Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/persistent-storage/" class="md-nav__link">
        Persistent Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/plugin-management/" class="md-nav__link">
        Plugin Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/repository-management/" class="md-nav__link">
        Repository Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/resource-management/" class="md-nav__link">
        Resource Management
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7" type="checkbox" id="__nav_1_7" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_7">
          Schedulers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Schedulers" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_7">
          <span class="md-nav__icon md-icon"></span>
          Schedulers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/schedulers/docker-local/" class="md-nav__link">
        Docker Local Scheduler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/schedulers/alternate-schedulers/" class="md-nav__link">
        Alternative Schedulers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_8" type="checkbox" id="__nav_1_8" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_8">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_8">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plugin-creation/" class="md-nav__link">
        Plugin creation
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Plugin triggers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Plugin triggers
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#available-plugin-triggers" class="md-nav__link">
    Available plugin triggers
  </a>
  
    <nav class="md-nav" aria-label="Available plugin triggers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#app-create" class="md-nav__link">
    app-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-destroy" class="md-nav__link">
    app-destroy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-exists" class="md-nav__link">
    app-exists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-maybe-create" class="md-nav__link">
    app-maybe-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-restart" class="md-nav__link">
    app-restart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-urls" class="md-nav__link">
    app-urls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builder-build" class="md-nav__link">
    builder-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builder-create-dokku-image" class="md-nav__link">
    builder-create-dokku-image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builder-dokku-image" class="md-nav__link">
    builder-dokku-image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builder-release" class="md-nav__link">
    builder-release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-deploy" class="md-nav__link">
    check-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commands-help-and-commands-plugin_namehelp" class="md-nav__link">
    commands help and commands &lt;PLUGIN_NAME&gt;:help
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config-get" class="md-nav__link">
    config-get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config-get-global" class="md-nav__link">
    config-get-global
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-post-deploy" class="md-nav__link">
    core-post-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-source" class="md-nav__link">
    deploy-source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployed-app-image-repo" class="md-nav__link">
    deployed-app-image-repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployed-app-image-tag" class="md-nav__link">
    deployed-app-image-tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployed-app-repository" class="md-nav__link">
    deployed-app-repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-build" class="md-nav__link">
    docker-args-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-deploy" class="md-nav__link">
    docker-args-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-process-build" class="md-nav__link">
    docker-args-process-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-process-deploy" class="md-nav__link">
    docker-args-process-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-process-run" class="md-nav__link">
    docker-args-process-run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-run" class="md-nav__link">
    docker-args-run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-add" class="md-nav__link">
    domains-add
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-disable" class="md-nav__link">
    domains-disable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-enable" class="md-nav__link">
    domains-enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-list" class="md-nav__link">
    domains-list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-setup" class="md-nav__link">
    domains-setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-vhost-enabled" class="md-nav__link">
    domains-vhost-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-deploy-branch" class="md-nav__link">
    git-deploy-branch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-post-pull" class="md-nav__link">
    git-post-pull
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-pre-pull" class="md-nav__link">
    git-pre-pull
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-revision" class="md-nav__link">
    git-revision
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-build-config" class="md-nav__link">
    network-build-config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-clear-config" class="md-nav__link">
    network-clear-config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-compute-ports" class="md-nav__link">
    network-compute-ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-config-exists" class="md-nav__link">
    network-config-exists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-get-ipaddr" class="md-nav__link">
    network-get-ipaddr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-get-listeners" class="md-nav__link">
    network-get-listeners
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-get-port" class="md-nav__link">
    network-get-port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-get-property" class="md-nav__link">
    network-get-property
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-write-ipaddr" class="md-nav__link">
    network-write-ipaddr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-write-port" class="md-nav__link">
    network-write-port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-app-template-source" class="md-nav__link">
    nginx-app-template-source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-dokku-template-source" class="md-nav__link">
    nginx-dokku-template-source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-hostname" class="md-nav__link">
    nginx-hostname
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-pre-reload" class="md-nav__link">
    nginx-pre-reload
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-app-clone" class="md-nav__link">
    post-app-clone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-app-clone-setup" class="md-nav__link">
    post-app-clone-setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-app-rename" class="md-nav__link">
    post-app-rename
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-app-rename-setup" class="md-nav__link">
    post-app-rename-setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-build-buildpack" class="md-nav__link">
    post-build-buildpack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-build-cnb" class="md-nav__link">
    post-build-cnb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-build-dockerfile" class="md-nav__link">
    post-build-dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-certs-remove" class="md-nav__link">
    post-certs-remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-certs-update" class="md-nav__link">
    post-certs-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-config-update" class="md-nav__link">
    post-config-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-container-create" class="md-nav__link">
    post-container-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-create" class="md-nav__link">
    post-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-delete" class="md-nav__link">
    post-delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-deploy" class="md-nav__link">
    post-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-domains-update" class="md-nav__link">
    post-domains-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-extract" class="md-nav__link">
    post-extract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-proxy-ports-update" class="md-nav__link">
    post-proxy-ports-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-release-buildpack" class="md-nav__link">
    post-release-buildpack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-release-cnb" class="md-nav__link">
    post-release-cnb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-release-dockerfile" class="md-nav__link">
    post-release-dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-stop" class="md-nav__link">
    post-stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-build-buildpack" class="md-nav__link">
    pre-build-buildpack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-build-cnb" class="md-nav__link">
    pre-build-cnb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-build-dockerfile" class="md-nav__link">
    pre-build-dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-delete" class="md-nav__link">
    pre-delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-deploy" class="md-nav__link">
    pre-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-disable-vhost" class="md-nav__link">
    pre-disable-vhost
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-enable-vhost" class="md-nav__link">
    pre-enable-vhost
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-receive-app" class="md-nav__link">
    pre-receive-app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-release-buildpack" class="md-nav__link">
    pre-release-buildpack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-release-cnb" class="md-nav__link">
    pre-release-cnb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-release-dockerfile" class="md-nav__link">
    pre-release-dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-restore" class="md-nav__link">
    pre-restore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-start" class="md-nav__link">
    pre-start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procfile-extract" class="md-nav__link">
    procfile-extract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procfile-get-command" class="md-nav__link">
    procfile-get-command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procfile-remove" class="md-nav__link">
    procfile-remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-build-config" class="md-nav__link">
    proxy-build-config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-clear-config" class="md-nav__link">
    proxy-clear-config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-disable" class="md-nav__link">
    proxy-disable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-enable" class="md-nav__link">
    proxy-enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-is-enabled" class="md-nav__link">
    proxy-is-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-type" class="md-nav__link">
    proxy-type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receive-app" class="md-nav__link">
    receive-app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receive-branch" class="md-nav__link">
    receive-branch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-and-deploy" class="md-nav__link">
    release-and-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#report" class="md-nav__link">
    report
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-get-property" class="md-nav__link">
    resource-get-property
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retire-container-failed" class="md-nav__link">
    retire-container-failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-app-status" class="md-nav__link">
    scheduler-app-status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-deploy" class="md-nav__link">
    scheduler-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-docker-cleanup" class="md-nav__link">
    scheduler-docker-cleanup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-enter" class="md-nav__link">
    scheduler-enter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-inspect" class="md-nav__link">
    scheduler-inspect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-is-deployed" class="md-nav__link">
    scheduler-is-deployed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-logs" class="md-nav__link">
    scheduler-logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-logs-failed" class="md-nav__link">
    scheduler-logs-failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-post-delete" class="md-nav__link">
    scheduler-post-delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-post-run" class="md-nav__link">
    scheduler-post-run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-register-retired" class="md-nav__link">
    scheduler-register-retired
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-retire" class="md-nav__link">
    scheduler-retire
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-run" class="md-nav__link">
    scheduler-run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-stop" class="md-nav__link">
    scheduler-stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-tags-create" class="md-nav__link">
    scheduler-tags-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-tags-destroy" class="md-nav__link">
    scheduler-tags-destroy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags-create" class="md-nav__link">
    tags-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags-destroy" class="md-nav__link">
    tags-destroy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uninstall" class="md-nav__link">
    uninstall
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-auth" class="md-nav__link">
    user-auth
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        Running Tests
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-process/" class="md-nav__link">
        Release Process
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_9" type="checkbox" id="__nav_1_9" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_9">
          Continuous Integration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Continuous Integration" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_9">
          <span class="md-nav__icon md-icon"></span>
          Continuous Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/continuous-integration/github-actions/" class="md-nav__link">
        Github Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/continuous-integration/gitlab-ci/" class="md-nav__link">
        Gitlab CI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/continuous-integration/generic/" class="md-nav__link">
        Generic CI/CD Integration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_10" type="checkbox" id="__nav_1_10" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_10">
          Community Contributions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community Contributions" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_10">
          <span class="md-nav__icon md-icon"></span>
          Community Contributions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/clients/" class="md-nav__link">
        Clients
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_11" type="checkbox" id="__nav_1_11" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_11">
          Community Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community Tutorials" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_11">
          <span class="md-nav__icon md-icon"></span>
          Community Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/tutorials/run-on-external-volume/" class="md-nav__link">
        Run Dokku on External Volume
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://pro.dokku.com/docs/getting-started/" class="md-nav__link">
        Pro
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://pro.dokku.com/blog/" class="md-nav__link">
        Blog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://dokku.dpdcart.com/cart/add?product_id=217344&method_id=236878" class="md-nav__link">
        Purchase Dokku Pro
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#available-plugin-triggers" class="md-nav__link">
    Available plugin triggers
  </a>
  
    <nav class="md-nav" aria-label="Available plugin triggers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#app-create" class="md-nav__link">
    app-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-destroy" class="md-nav__link">
    app-destroy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-exists" class="md-nav__link">
    app-exists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-maybe-create" class="md-nav__link">
    app-maybe-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-restart" class="md-nav__link">
    app-restart
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#app-urls" class="md-nav__link">
    app-urls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builder-build" class="md-nav__link">
    builder-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builder-create-dokku-image" class="md-nav__link">
    builder-create-dokku-image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builder-dokku-image" class="md-nav__link">
    builder-dokku-image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#builder-release" class="md-nav__link">
    builder-release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-deploy" class="md-nav__link">
    check-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commands-help-and-commands-plugin_namehelp" class="md-nav__link">
    commands help and commands &lt;PLUGIN_NAME&gt;:help
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config-get" class="md-nav__link">
    config-get
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config-get-global" class="md-nav__link">
    config-get-global
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-post-deploy" class="md-nav__link">
    core-post-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-source" class="md-nav__link">
    deploy-source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployed-app-image-repo" class="md-nav__link">
    deployed-app-image-repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployed-app-image-tag" class="md-nav__link">
    deployed-app-image-tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployed-app-repository" class="md-nav__link">
    deployed-app-repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-build" class="md-nav__link">
    docker-args-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-deploy" class="md-nav__link">
    docker-args-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-process-build" class="md-nav__link">
    docker-args-process-build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-process-deploy" class="md-nav__link">
    docker-args-process-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-process-run" class="md-nav__link">
    docker-args-process-run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-args-run" class="md-nav__link">
    docker-args-run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-add" class="md-nav__link">
    domains-add
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-disable" class="md-nav__link">
    domains-disable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-enable" class="md-nav__link">
    domains-enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-list" class="md-nav__link">
    domains-list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-setup" class="md-nav__link">
    domains-setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domains-vhost-enabled" class="md-nav__link">
    domains-vhost-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-deploy-branch" class="md-nav__link">
    git-deploy-branch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-post-pull" class="md-nav__link">
    git-post-pull
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-pre-pull" class="md-nav__link">
    git-pre-pull
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-revision" class="md-nav__link">
    git-revision
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    install
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-build-config" class="md-nav__link">
    network-build-config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-clear-config" class="md-nav__link">
    network-clear-config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-compute-ports" class="md-nav__link">
    network-compute-ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-config-exists" class="md-nav__link">
    network-config-exists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-get-ipaddr" class="md-nav__link">
    network-get-ipaddr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-get-listeners" class="md-nav__link">
    network-get-listeners
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-get-port" class="md-nav__link">
    network-get-port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-get-property" class="md-nav__link">
    network-get-property
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-write-ipaddr" class="md-nav__link">
    network-write-ipaddr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-write-port" class="md-nav__link">
    network-write-port
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-app-template-source" class="md-nav__link">
    nginx-app-template-source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-dokku-template-source" class="md-nav__link">
    nginx-dokku-template-source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-hostname" class="md-nav__link">
    nginx-hostname
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-pre-reload" class="md-nav__link">
    nginx-pre-reload
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-app-clone" class="md-nav__link">
    post-app-clone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-app-clone-setup" class="md-nav__link">
    post-app-clone-setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-app-rename" class="md-nav__link">
    post-app-rename
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-app-rename-setup" class="md-nav__link">
    post-app-rename-setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-build-buildpack" class="md-nav__link">
    post-build-buildpack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-build-cnb" class="md-nav__link">
    post-build-cnb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-build-dockerfile" class="md-nav__link">
    post-build-dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-certs-remove" class="md-nav__link">
    post-certs-remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-certs-update" class="md-nav__link">
    post-certs-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-config-update" class="md-nav__link">
    post-config-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-container-create" class="md-nav__link">
    post-container-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-create" class="md-nav__link">
    post-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-delete" class="md-nav__link">
    post-delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-deploy" class="md-nav__link">
    post-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-domains-update" class="md-nav__link">
    post-domains-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-extract" class="md-nav__link">
    post-extract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-proxy-ports-update" class="md-nav__link">
    post-proxy-ports-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-release-buildpack" class="md-nav__link">
    post-release-buildpack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-release-cnb" class="md-nav__link">
    post-release-cnb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-release-dockerfile" class="md-nav__link">
    post-release-dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-stop" class="md-nav__link">
    post-stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-build-buildpack" class="md-nav__link">
    pre-build-buildpack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-build-cnb" class="md-nav__link">
    pre-build-cnb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-build-dockerfile" class="md-nav__link">
    pre-build-dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-delete" class="md-nav__link">
    pre-delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-deploy" class="md-nav__link">
    pre-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-disable-vhost" class="md-nav__link">
    pre-disable-vhost
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-enable-vhost" class="md-nav__link">
    pre-enable-vhost
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-receive-app" class="md-nav__link">
    pre-receive-app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-release-buildpack" class="md-nav__link">
    pre-release-buildpack
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-release-cnb" class="md-nav__link">
    pre-release-cnb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-release-dockerfile" class="md-nav__link">
    pre-release-dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-restore" class="md-nav__link">
    pre-restore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pre-start" class="md-nav__link">
    pre-start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procfile-extract" class="md-nav__link">
    procfile-extract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procfile-get-command" class="md-nav__link">
    procfile-get-command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procfile-remove" class="md-nav__link">
    procfile-remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-build-config" class="md-nav__link">
    proxy-build-config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-clear-config" class="md-nav__link">
    proxy-clear-config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-disable" class="md-nav__link">
    proxy-disable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-enable" class="md-nav__link">
    proxy-enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-is-enabled" class="md-nav__link">
    proxy-is-enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-type" class="md-nav__link">
    proxy-type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receive-app" class="md-nav__link">
    receive-app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receive-branch" class="md-nav__link">
    receive-branch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-and-deploy" class="md-nav__link">
    release-and-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#report" class="md-nav__link">
    report
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-get-property" class="md-nav__link">
    resource-get-property
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retire-container-failed" class="md-nav__link">
    retire-container-failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-app-status" class="md-nav__link">
    scheduler-app-status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-deploy" class="md-nav__link">
    scheduler-deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-docker-cleanup" class="md-nav__link">
    scheduler-docker-cleanup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-enter" class="md-nav__link">
    scheduler-enter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-inspect" class="md-nav__link">
    scheduler-inspect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-is-deployed" class="md-nav__link">
    scheduler-is-deployed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-logs" class="md-nav__link">
    scheduler-logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-logs-failed" class="md-nav__link">
    scheduler-logs-failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-post-delete" class="md-nav__link">
    scheduler-post-delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-post-run" class="md-nav__link">
    scheduler-post-run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-register-retired" class="md-nav__link">
    scheduler-register-retired
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-retire" class="md-nav__link">
    scheduler-retire
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-run" class="md-nav__link">
    scheduler-run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-stop" class="md-nav__link">
    scheduler-stop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-tags-create" class="md-nav__link">
    scheduler-tags-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-tags-destroy" class="md-nav__link">
    scheduler-tags-destroy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags-create" class="md-nav__link">
    tags-create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags-destroy" class="md-nav__link">
    tags-destroy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uninstall" class="md-nav__link">
    uninstall
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-auth" class="md-nav__link">
    user-auth
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/dokku/dokku/edit/master/docs/development/plugin-triggers.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="plugin-triggers">Plugin triggers</h1>
<p><a href="https://github.com/dokku/plugn">Plugin triggers</a> (formerly <a href="https://github.com/progrium/pluginhook">pluginhooks</a>) are a good way to jack into existing Dokku infrastructure. You can use them to modify the output of various Dokku commands or override internal configuration.</p>
<p>Plugin triggers are simply scripts that are executed by the system. You can use any language you want, so long as the script:</p>
<ul>
<li>Is executable</li>
<li>Has the proper language requirements installed</li>
</ul>
<p>For instance, if you wanted to write a plugin trigger in PHP, you would need to have <code>php</code> installed and available on the CLI prior to plugin trigger invocation.</p>
<p>The following is an example for the <code>nginx-hostname</code> plugin trigger. It reverses the hostname that is provided to nginx during deploys. If you created an executable file named <code>nginx-hostname</code> with the following code in your plugin trigger, it would be invoked by Dokku during the normal app deployment process:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">SUBDOMAIN</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">VHOST</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="nv">NEW_SUBDOMAIN</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$SUBDOMAIN</span> <span class="p">|</span> rev<span class="sb">`</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$NEW_SUBDOMAIN</span><span class="s2">.</span><span class="nv">$VHOST</span><span class="s2">&quot;</span>
</code></pre></div>
<h2 id="available-plugin-triggers">Available plugin triggers</h2>
<p>There are a number of plugin-related triggers. These can be optionally implemented by plugins and allow integration into the standard Dokku setup/teardown process.</p>
<p>The following plugin triggers describe those available to a Dokku installation. As well, there is an example for each trigger that you can use as templates for your own plugin development.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The example plugin trigger code is not guaranteed to be implemented as in within dokku, and are merely simplified examples. Please look at the Dokku source for larger, more in-depth examples.</p>
</div>
<h3 id="app-create"><code>app-create</code></h3>
<ul>
<li>Description: Creates an app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="app-destroy"><code>app-destroy</code></h3>
<ul>
<li>Description: Destroys an app (with confirmation if force isn't specified)</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="app-exists"><code>app-exists</code></h3>
<ul>
<li>Description: Creates an app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="app-maybe-create"><code>app-maybe-create</code></h3>
<ul>
<li>Description: Creates an app (gated by whether this is globally enabled or not)</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="app-restart"><code>app-restart</code></h3>
<ul>
<li>Description: Triggers an app restart</li>
<li>Invoked by: <code>dokku config:clear</code>, <code>dokku config:set</code>, <code>dokku config:unset</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="app-urls"><code>app-urls</code></h3>
<ul>
<li>Description: Allows you to change the urls Dokku reports for an application. Will override any auto-detected urls.</li>
<li>Invoked by: <code>dokku deploy</code>, <code>dokku url</code>, and <code>dokku urls</code></li>
<li>Arguments: <code>$APP $URL_TYPE</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># Sets the domain to `internal.tld`</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">URL_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$URL_TYPE</span><span class="s2">&quot;</span> <span class="k">in</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>  url<span class="o">)</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="nb">echo</span> <span class="s2">&quot;https://internal.tld/</span><span class="si">${</span><span class="nv">APP</span><span class="si">}</span><span class="s2">/&quot;</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    <span class="p">;;</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>  urls<span class="o">)</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>    <span class="nb">echo</span> <span class="s2">&quot;https://internal.tld/</span><span class="si">${</span><span class="nv">APP</span><span class="si">}</span><span class="s2">/&quot;</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>    <span class="nb">echo</span> <span class="s2">&quot;http://internal.tld/</span><span class="si">${</span><span class="nv">APP</span><span class="si">}</span><span class="s2">/&quot;</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    <span class="p">;;</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="k">esac</span>
</code></pre></div>
<h3 id="builder-build"><code>builder-build</code></h3>
<ul>
<li>Description: Triggers the artifact build process</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$BUILDER_TYPE</code> <code>$APP</code> <code>$SOURCECODE_WORK_DIR</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="builder-create-dokku-image"><code>builder-create-dokku-image</code></h3>
<ul>
<li>Description: Allows modification of the configured dokku-image</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$BUILDER_TYPE</code> <code>$APP</code> <code>$SOURCECODE_WORK_DIR</code> <code>$DOKKU_IMAGE</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="builder-dokku-image"><code>builder-dokku-image</code></h3>
<ul>
<li>Description: Allows modification of the used dokku-image.</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$BUILDER_TYPE</code> <code>$APP</code> <code>$SOURCECODE_WORK_DIR</code> <code>$DOKKU_IMAGE</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="builder-release"><code>builder-release</code></h3>
<ul>
<li>Description: Triggers the artifact release process</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$BUILDER_TYPE</code> <code>$APP</code> <code>$IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="check-deploy"><code>check-deploy</code></h3>
<ul>
<li>Description: Allows you to run checks on a deploy before Dokku allows the container to handle requests.</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$APP $CONTAINER_ID $PROC_TYPE $PORT $IP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="c1"># Disables deploys of containers based on whether the</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="c1"># `DOKKU_DISABLE_DEPLOY` env var is set to `true` for an app</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_AVAILABLE_PATH</span><span class="s2">/config/functions&quot;</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">CONTAINER_ID</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">PROC_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">PORT</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$4</span><span class="s2">&quot;</span> <span class="p">;</span> <span class="nv">IP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$5</span><span class="s2">&quot;</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="nb">eval</span> <span class="s2">&quot;</span><span class="k">$(</span>config_export app <span class="nv">$APP</span><span class="k">)</span><span class="s2">&quot;</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="nv">DOKKU_DISABLE_DEPLOY</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">DOKKU_DISABLE_DEPLOY</span><span class="k">:-</span><span class="nv">false</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$DOKKU_DISABLE_DEPLOY</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>  <span class="nb">echo</span> -e <span class="s2">&quot;\033[31m\033[1mDeploys disabled, sorry.\033[0m&quot;</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>  <span class="nb">exit</span> <span class="m">1</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="k">fi</span>
</code></pre></div>
<h3 id="commands-help-and-commands-plugin_namehelp"><code>commands help</code> and <code>commands &lt;PLUGIN_NAME&gt;:help</code></h3>
<ul>
<li>Description: Your plugin should implement a <code>help</code> command in your <code>commands</code> file to take advantage of this plugin trigger. <code>commands help</code> is used by <code>dokku help</code> to aggregate all plugins abbreviated <code>help</code> output. Implementing  <code>&lt;PLUGIN_NAME&gt;:help</code> in your <code>commands</code> file gives users looking for help, a more detailed output. 'commands help' must be implemented inside the <code>commands</code> plugin file. It's recommended that <code>PLUGIN_NAME:help</code> be added to the commands file to ensure consistency among community plugins and give you a new avenue to share rich help content with your user.</li>
<li>Invoked by: <code>dokku help</code> and <code>commands &lt;PLUGIN_NAME&gt;:help</code></li>
<li>Arguments: None</li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c1"># Outputs help for the derp plugin</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="k">in</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>  <span class="nb">help</span> <span class="p">|</span> hello:help<span class="o">)</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    help_content_func <span class="o">()</span> <span class="o">{</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>      <span class="nb">declare</span> <span class="nv">desc</span><span class="o">=</span><span class="s2">&quot;return help_content string&quot;</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>      cat<span class="s">&lt;&lt;help_content</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="s">    hello &lt;app&gt;, Says &quot;Hello &lt;app&gt;&quot;</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="s">    hello:world, Says &quot;Hello world&quot;</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="s">help_content</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    <span class="o">}</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">=</span> <span class="s2">&quot;hello:help&quot;</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>        <span class="nb">echo</span> -e <span class="s1">&#39;Usage: dokku hello[:world] [&lt;app&gt;]&#39;</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>        <span class="nb">echo</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>        <span class="nb">echo</span> <span class="s1">&#39;Say Hello World.&#39;</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>        <span class="nb">echo</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>        <span class="nb">echo</span> <span class="s1">&#39;Example:&#39;</span>
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>        <span class="nb">echo</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>        <span class="nb">echo</span> <span class="s1">&#39;$ dokku hello:world&#39;</span>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>        <span class="nb">echo</span> <span class="s1">&#39;Hello world&#39;</span>
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>        <span class="nb">echo</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>        <span class="nb">echo</span> <span class="s1">&#39;Additional commands:&#39;</span>
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>        help_content_func <span class="p">|</span> sort <span class="p">|</span> column -c2 -t -s,
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>    <span class="k">else</span>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>        help_content_func
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>    <span class="k">fi</span>
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>    <span class="p">;;</span>
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>  *<span class="o">)</span>
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>    <span class="nb">exit</span> <span class="nv">$DOKKU_NOT_IMPLEMENTED_EXIT</span>
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>    <span class="p">;;</span>
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a><span class="k">esac</span>
</code></pre></div>
<h3 id="config-get"><code>config-get</code></h3>
<ul>
<li>Description: Fetches the app config value for a key</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP $KEY</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="config-get-global"><code>config-get-global</code></h3>
<ul>
<li>Description: Fetches the global config value for a key</li>
<li>Invoked by:</li>
<li>Arguments: <code>$KEY</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="core-post-deploy"><code>core-post-deploy</code></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>To avoid issues with community plugins, this plugin trigger should be used <em>only</em> for core plugins. Please avoid using this trigger in your own plugins.</p>
</div>
<ul>
<li>Description: Allows running of commands after an app's processes have been scaled up, but before old containers are torn down. Dokku core currently uses this to switch traffic on nginx.</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$APP $INTERNAL_PORT $INTERNAL_IP_ADDRESS $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="c1"># Notify an external service that a successful deploy has occurred.</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>curl <span class="s2">&quot;http://httpstat.us/200&quot;</span>
</code></pre></div>
<h3 id="dependencies"><code>dependencies</code></h3>
<ul>
<li>Description: Used to install system-level dependencies.</li>
<li>Invoked by: <code>dokku plugin:install-dependencies</code></li>
<li>Arguments: None</li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="c1"># Installs nginx for the current plugin</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="c1"># Supports both opensuse and ubuntu</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="nb">export</span> <span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$DOKKU_DISTRO</span><span class="s2">&quot;</span> <span class="k">in</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>  debian<span class="p">|</span>ubuntu<span class="o">)</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>    apt-get -qq -y --no-install-recommends install nginx
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>    <span class="p">;;</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>  opensuse<span class="o">)</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>    zypper -q <span class="k">in</span> -y nginx
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>    <span class="p">;;</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="k">esac</span>
</code></pre></div>
<h3 id="deploy-source"><code>deploy-source</code></h3>
<ul>
<li>Description: Used for reporting what the current detected deployment source is. The first detected source should always win.</li>
<li>Invoked by: <code>dokku apps:report</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="c1"># Checks if the app should be deployed via git</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="nv">STDIN</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="c1"># bail if another source is detected</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="k">if</span> <span class="o">[[</span> -n <span class="s2">&quot;</span><span class="nv">$STDIN</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>  <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$STDIN</span><span class="s2">&quot;</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>  <span class="k">return</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="k">fi</span>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="k">if</span> <span class="o">[[</span> -d <span class="s2">&quot;</span><span class="nv">$DOKKU_ROOT</span><span class="s2">/</span><span class="nv">$APP</span><span class="s2">/refs&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>  <span class="nb">echo</span> <span class="s2">&quot;git&quot;</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="k">fi</span>
</code></pre></div>
<h3 id="deployed-app-image-repo"><code>deployed-app-image-repo</code></h3>
<ul>
<li>Description: Used to manage the full repo of the image being deployed. Useful for deploying from an external registry where the repository name is not <code>dokku/$APP</code></li>
<li>Invoked by: <code>internal function dokku_deploy_cmd() (deploy phase)</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="c1"># change the repo from dokku/APP to dokkupaas/APP</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="nb">echo</span> <span class="s2">&quot;dokkupaas/</span><span class="nv">$APP</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="deployed-app-image-tag"><code>deployed-app-image-tag</code></h3>
<ul>
<li>Description: Used to manage the tag of the image being deployed. Useful for deploying a specific version of an image, or when deploying from an external registry</li>
<li>Invoked by: <code>internal function dokku_deploy_cmd() (deploy phase)</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="c1"># customize the tag version</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="nb">echo</span> <span class="s1">&#39;not-latest&#39;</span>
</code></pre></div>
<h3 id="deployed-app-repository"><code>deployed-app-repository</code></h3>
<ul>
<li>Description: Used to manage the remote repository of the image being deployed.</li>
<li>Invoked by: <code>internal function dokku_deploy_cmd() (deploy phase)</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="nb">echo</span> <span class="s1">&#39;derp.dkr.ecr.us-east-1.amazonaws.com&#39;</span>
</code></pre></div>
<h3 id="docker-args-build"><code>docker-args-build</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Deprecated, please use <code>docker-args-process-build</code> instead</p>
</div>
<ul>
<li>Description:</li>
<li>Invoked by: <code>internal function dokku_build() (build phase)</code></li>
<li>Arguments: <code>$APP $IMAGE_SOURCE_TYPE</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="c1"># Sets a docker build-arg called CACHEBUST which can be used</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># to bust cache at any arbitrary point in a Dockerfile build</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="nv">STDIN</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_SOURCE_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="nv">output</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="k">if</span> <span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$IMAGE_SOURCE_TYPE</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;dockerfile&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>  <span class="nv">output</span><span class="o">=</span><span class="s2">&quot; --build-arg CACHEBUST=</span><span class="k">$(</span>date +%s<span class="k">)</span><span class="s2">&quot;</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="k">fi</span>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="nb">echo</span> -n <span class="s2">&quot;</span><span class="nv">$STDIN$output</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="docker-args-deploy"><code>docker-args-deploy</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Deprecated, please use <code>docker-args-process-deploy</code> instead</p>
</div>
<ul>
<li>Description:</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG [$PROC_TYPE $CONTAINER_INDEX]</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="docker-args-process-build"><code>docker-args-process-build</code></h3>
<ul>
<li>Description: <code>$PROC_TYPE</code> may be set to magic <code>_all_</code> process type to signify global docker deploy options.</li>
<li>Invoked by: <code>dokku ps:rebuild</code></li>
<li>Arguments: <code>$APP $IMAGE_SOURCE_TYPE</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_SOURCE_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="docker-args-process-deploy"><code>docker-args-process-deploy</code></h3>
<ul>
<li>Description: <code>$PROC_TYPE</code> may be set to magic <code>_all_</code> process type to signify global docker deploy options.</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$APP $IMAGE_SOURCE_TYPE $IMAGE_TAG [$PROC_TYPE $CONTAINER_INDEX]</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">$IMAGE_SOURCE_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">PROC_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$4</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">CONTAINER_INDEX</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$5</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="docker-args-process-run"><code>docker-args-process-run</code></h3>
<ul>
<li>Description: <code>$PROC_TYPE</code> may be set to magic <code>_all_</code> process type to signify global docker run options.</li>
<li>Invoked by: <code>dokku run</code></li>
<li>Arguments: <code>$APP $IMAGE_SOURCE_TYPE $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_SOURCE_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="docker-args-run"><code>docker-args-run</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Deprecated, please use <code>docker-args-process-run</code> instead</p>
</div>
<ul>
<li>Description:</li>
<li>Invoked by: <code>dokku run</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="domains-add"><code>domains-add</code></h3>
<ul>
<li>Description: Adds a domain to an app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code> <code>$DOMAIN</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="domains-disable"><code>domains-disable</code></h3>
<ul>
<li>Description: Disables domains for an app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code> <code>$RESTART_APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="domains-enable"><code>domains-enable</code></h3>
<ul>
<li>Description: Enables domains for an app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code> <code>$RESTART_APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="domains-list"><code>domains-list</code></h3>
<ul>
<li>Description: Lists all domains for an app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="domains-setup"><code>domains-setup</code></h3>
<ul>
<li>Description: Initializes domains for an app if enabled</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="domains-vhost-enabled"><code>domains-vhost-enabled</code></h3>
<ul>
<li>Description: Checks if a virtual hosts are enabled for an app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="git-deploy-branch"><code>git-deploy-branch</code></h3>
<ul>
<li>Description: Outputs the deploy branch for an app, inherited or not</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="git-post-pull"><code>git-post-pull</code></h3>
<ul>
<li>Description:</li>
<li>Invoked by: <code>dokku git-upload-pack</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="git-pre-pull"><code>git-pre-pull</code></h3>
<ul>
<li>Description:</li>
<li>Invoked by: <code>dokku git-upload-pack</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<p>since it does not get called for commands that use <code>git-upload-archive</code> such
as <code>git archive</code>. Instead, use the <a href="#user-auth"><code>user-auth</code></a> trigger.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>git-pre-pull</code> trigger should <em>not</em> be used for authentication</p>
</div>
<h3 id="git-revision"><code>git-revision</code></h3>
<ul>
<li>Description: Allows you to fetch the current git revision for a given application</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="install"><code>install</code></h3>
<ul>
<li>Description: Used to setup any files/configuration for a plugin.</li>
<li>Invoked by: <code>dokku plugin:install</code>.</li>
<li>Arguments: None</li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="c1"># Sets the hostname of the Dokku server</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="c1"># based on the output of `hostname -f`</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="k">if</span> <span class="o">[[</span> ! -f  <span class="s2">&quot;</span><span class="nv">$DOKKU_ROOT</span><span class="s2">/HOSTNAME&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>  hostname -f &gt; <span class="nv">$DOKKU_ROOT</span>/HOSTNAME
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="k">fi</span>
</code></pre></div>
<h3 id="network-build-config"><code>network-build-config</code></h3>
<ul>
<li>Description: Rebuilds network configuration</li>
<li>Invoked by: <code>internally triggered by proxy-build-config within proxy implementations</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-clear-config"><code>network-clear-config</code></h3>
<ul>
<li>Description: Clears network configuration</li>
<li>Invoked by: <code>internally triggered within proxy implementations</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-compute-ports"><code>network-compute-ports</code></h3>
<ul>
<li>Description: Computes the ports for a given app container</li>
<li>Invoked by: <code>internally triggered by proxy-build-config within proxy implementations</code></li>
<li>Arguments: <code>$APP $PROC_TYPE $IS_HEROKUISH_CONTAINER $CONTAINER_INDEX</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-config-exists"><code>network-config-exists</code></h3>
<ul>
<li>Description: Returns whether the network configuration for a given app exists</li>
<li>Invoked by: <code>internally triggered by core-post-deploy within proxy implementations</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-get-ipaddr"><code>network-get-ipaddr</code></h3>
<ul>
<li>Description: Return the ipaddr for a given app container</li>
<li>Invoked by: <code>internally triggered by a deploy</code></li>
<li>Arguments: <code>$APP $PROC_TYPE $CONTAINER_ID</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-get-listeners"><code>network-get-listeners</code></h3>
<ul>
<li>Description: Return the listeners (host:port combinations) for a given app container</li>
<li>Invoked by: <code>internally triggered by a deploy</code></li>
<li>Arguments: <code>$APP $PROCESS_TYPE</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-get-port"><code>network-get-port</code></h3>
<ul>
<li>Description: Return the port for a given app container</li>
<li>Invoked by: <code>internally triggered by a deploy</code></li>
<li>Arguments: <code>$APP $PROC_TYPE $CONTAINER_ID $IS_HEROKUISH_CONTAINER</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-get-property"><code>network-get-property</code></h3>
<ul>
<li>Description: Return the network value for an app's property</li>
<li>Invoked by: <code>internally triggered by a deploy</code></li>
<li>Arguments: <code>$APP $KEY</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-write-ipaddr"><code>network-write-ipaddr</code></h3>
<ul>
<li>Description: Write the ipaddr for a given app index</li>
<li>Invoked by: <code>internally triggered by a deploy</code></li>
<li>Arguments: <code>$APP $PROC_TYPE $CONTAINER_INDEX $IP_ADDRESS</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="network-write-port"><code>network-write-port</code></h3>
<ul>
<li>Description: Write the port for a given app index</li>
<li>Invoked by: <code>internally triggered by a deploy</code></li>
<li>Arguments: <code>$APP $PROC_TYPE $CONTAINER_INDEX $PORT</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="nginx-app-template-source"><code>nginx-app-template-source</code></h3>
<ul>
<li>Description: Return the path to a <code>sigil</code> template that should be used to generate a given nginx configuration file.</li>
<li>Invoked by: <code>nginx-vhosts#build-config</code></li>
<li>Arguments: <code>$APP $TEMPLATE_TYPE</code></li>
<li>The <code>TEMPLATE_TYPE</code> argument can be one of: <code>[app-config, hsts-config, validate-config]</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="nv">TEMPLATE_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$TEMPLATE_TYPE</span><span class="s2">&quot;</span> <span class="k">in</span>
<a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>  app-config<span class="o">)</span>
<a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a>    <span class="nb">echo</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">cd</span> <span class="s2">&quot;</span><span class="k">$(</span>dirname <span class="s2">&quot;</span><span class="si">${</span><span class="nv">BASH_SOURCE</span><span class="p">[0]</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span><span class="k">)</span><span class="s2">/app.conf.sigil&quot;</span><span class="p">;;</span>
<a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a>  hsts-config<span class="o">)</span>
<a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a>    <span class="nb">echo</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">cd</span> <span class="s2">&quot;</span><span class="k">$(</span>dirname <span class="s2">&quot;</span><span class="si">${</span><span class="nv">BASH_SOURCE</span><span class="p">[0]</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span><span class="k">)</span><span class="s2">/hsts.conf.sigil&quot;</span><span class="p">;;</span>
<a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a>  validate-config<span class="o">)</span>
<a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a>    <span class="nb">echo</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">cd</span> <span class="s2">&quot;</span><span class="k">$(</span>dirname <span class="s2">&quot;</span><span class="si">${</span><span class="nv">BASH_SOURCE</span><span class="p">[0]</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span><span class="k">)</span><span class="s2">/validate.conf.sigil&quot;</span><span class="p">;;</span>
<a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a>  *<span class="o">)</span>
<a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a>    dokku_log_fail <span class="s2">&quot;Invalid template type: </span><span class="si">${</span><span class="nv">TEMPLATE_TYPE</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a><span class="k">esac</span>
</code></pre></div>
<p>The default templates are viewable here: <a href="https://github.com/dokku/dokku/tree/master/plugins/nginx-vhosts/templates">plugins/nginx-vhosts/templates/</a></p>
<h3 id="nginx-dokku-template-source"><code>nginx-dokku-template-source</code></h3>
<ul>
<li>Description: Return the path to a <code>sigil</code> template that should be used to generate the <code>dokku.conf</code> nginx configuration file.</li>
<li>Invoked by: <code>nginx-vhosts#install</code></li>
<li>Arguments: None, however the <code>sigil</code> template can make use of the following variables: <code>$.DOKKU_ROOT $.NGINX_ROOT</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="nb">echo</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nb">cd</span> <span class="s2">&quot;</span><span class="k">$(</span>dirname <span class="s2">&quot;</span><span class="si">${</span><span class="nv">BASH_SOURCE</span><span class="p">[0]</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span><span class="k">)</span><span class="s2">/dokku.conf.sigil&quot;</span>
</code></pre></div>
<p>The default template is viewable here: <a href="https://github.com/dokku/dokku/blob/master/plugins/nginx-vhosts/templates/dokku.conf.sigil">plugins/nginx-vhosts/templates/dokku.conf.sigil</a></p>
<h3 id="nginx-hostname"><code>nginx-hostname</code></h3>
<ul>
<li>Description: Allows you to customize the hostname for a given app</li>
<li>Invoked by: <code>dokku domains:setup</code></li>
<li>Arguments: <code>$APP $SUBDOMAIN $VHOST</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="c1"># Reverses the hostname for the app</span>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">SUBDOMAIN</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">VHOST</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span>
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>
<a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="nv">NEW_SUBDOMAIN</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$SUBDOMAIN</span> <span class="p">|</span> rev<span class="sb">`</span>
<a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$NEW_SUBDOMAIN</span><span class="s2">.</span><span class="nv">$VHOST</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="nginx-pre-reload"><code>nginx-pre-reload</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The arguments INTERNAL_PORT and INTERNAL_IP_ADDRESS are no longer sufficient to retrieve all app listeners. Please run <code>plugn trigger network-get-listeners APP</code> within any implementation of <code>nginx-pre-reload</code> in order to retrieve all application listeners.</p>
</div>
<ul>
<li>Description: Run before nginx reloads hosts</li>
<li>Invoked by: <code>dokku nginx:build-config</code></li>
<li>Arguments: <code>$APP $INTERNAL_PORT $INTERNAL_IP_ADDRESS</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="c1"># Runs a check against all nginx conf files</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="c1"># to ensure they are valid</span>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>nginx -t
</code></pre></div>
<h3 id="post-app-clone"><code>post-app-clone</code></h3>
<ul>
<li>Description: Allows you to run commands after an app was cloned.</li>
<li>Invoked by: <code>dokku apps:clone</code></li>
<li>Arguments: <code>$OLD_APP_NAME $NEW_APP_NAME</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-app-clone-setup"><code>post-app-clone-setup</code></h3>
<ul>
<li>Description: Allows you to run commands after an app is setup, and before it is rebuild. This is useful for cleaning up tasks, or ensuring configuration from an old app is copied to the new app</li>
<li>Invoked by: <code>dokku apps:clone</code></li>
<li>Arguments: <code>$OLD_APP_NAME $NEW_APP_NAME</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-app-rename"><code>post-app-rename</code></h3>
<ul>
<li>Description: Allows you to run commands after an app was renamed.</li>
<li>Invoked by: <code>dokku apps:rename</code></li>
<li>Arguments: <code>$OLD_APP_NAME $NEW_APP_NAME</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-app-rename-setup"><code>post-app-rename-setup</code></h3>
<ul>
<li>Description: Allows you to run commands after an app is setup, and before it is rebuild. This is useful for cleaning up tasks, or ensuring configuration from an old app is copied to the new app</li>
<li>Invoked by: <code>dokku apps:rename</code></li>
<li>Arguments: <code>$OLD_APP_NAME $NEW_APP_NAME</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-build-buildpack"><code>post-build-buildpack</code></h3>
<ul>
<li>Description: Allows you to run commands after the build image is create for a given app. Only applies to apps using buildpacks.</li>
<li>Invoked by: <code>internal function dokku_build() (build phase)</code></li>
<li>Arguments: <code>$APP</code> <code>$SOURCECODE_WORK_DIR</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-build-cnb"><code>post-build-cnb</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The cnb plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run commands after the build image is create for a given app. Only applies to apps using cnb.</li>
<li>Invoked by: <code>internal function dokku_build() (build phase)</code></li>
<li>Arguments: <code>$APP</code> <code>$SOURCECODE_WORK_DIR</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-build-dockerfile"><code>post-build-dockerfile</code></h3>
<ul>
<li>Description: Allows you to run commands after the build image is create for a given app. Only applies to apps using a dockerfile.</li>
<li>Invoked by: <code>internal function dokku_build() (build phase)</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-certs-remove"><code>post-certs-remove</code></h3>
<ul>
<li>Description: Allows you to run commands after a cert is removed</li>
<li>Invoked by: <code>dokku certs:remove</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-certs-update"><code>post-certs-update</code></h3>
<ul>
<li>Description: Allows you to run commands after a cert is added/updated</li>
<li>Invoked by: <code>dokku certs:add</code>, <code>dokku certs:update</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-config-update"><code>post-config-update</code></h3>
<ul>
<li>Description: Allows you to get notified when one or more configs is added or removed. Action can be <em>set</em> or <em>unset</em></li>
<li>Invoked by: <code>dokku config:set</code>, <code>dokku config:unset</code></li>
<li>Arguments: <code>$APP</code> <code>set|unset</code> <code>key1=VALUE1 key2=VALUE2</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-container-create"><code>post-container-create</code></h3>
<ul>
<li>Description: This trigger should be used to do stuff to containers after they are created but before they are started. They are explicitely for commands that may involve network traffic, and <em>not</em> for commands that are self-contained, such as chown or tar.</li>
<li>Invoked by: <code>dokku run</code>, <code>dokku ps:rebuild</code>, <code>dokku deploy</code></li>
<li>Arguments "app|service" "$CONTAINER_ID" "$APP|$SERVICE" "$PHASE"</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-create"><code>post-create</code></h3>
<ul>
<li>Description: Can be used to run commands after an app is created.</li>
<li>Invoked by: <code>dokku apps:create</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="c1"># Runs a command to ensure that an app</span>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="c1"># has a postgres database when it is starting</span>
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a>
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a><span class="nv">POSTGRES</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a>
<a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a>dokku postgres:create <span class="nv">$POSTGRES</span>
<a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a>dokku postgres:link <span class="nv">$POSTGRES</span> <span class="nv">$APP</span>
</code></pre></div>
<h3 id="post-delete"><code>post-delete</code></h3>
<ul>
<li>Description: Can be used to run commands after an app is deleted.</li>
<li>Invoked by: <code>dokku apps:destroy</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="c1"># Runs a command to ensure that an app&#39;s</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="c1"># postgres installation is removed</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a>dokku postgres:destroy <span class="nv">$APP</span>
</code></pre></div>
<h3 id="post-deploy"><code>post-deploy</code></h3>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Please see <a href="#core-post-deploy">core-post-deploy</a> if contributing a core plugin with the <code>post-deploy</code> hook.</p>
</div>
<ul>
<li>Description: Allows running of commands after an app's processes have been scaled up, but before old containers are torn down. Dokku calls this <em>after</em> <code>core-post-deploy</code>. Deployment Tasks are also invoked by this plugin trigger.</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$APP $INTERNAL_PORT $INTERNAL_IP_ADDRESS $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="c1"># Notify an external service that a successful deploy has occurred.</span>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a>curl <span class="s2">&quot;http://httpstat.us/200&quot;</span>
</code></pre></div>
<h3 id="post-domains-update"><code>post-domains-update</code></h3>
<ul>
<li>Description: Allows you to run commands once the domain for an app has been updated. It also sends in the command that has been used. This can be "add", "clear" or "remove". The third argument will be the optional list of domains</li>
<li>Invoked by: <code>dokku domains:add</code>, <code>dokku domains:clear</code>, <code>dokku domains:remove</code>, <code>dokku domains:set</code></li>
<li>Arguments: <code>$APP</code> <code>action name</code> <code>domains</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="c1"># Reloads haproxy for our imaginary haproxy plugin</span>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="c1"># that replaces the nginx-vhosts plugin</span>
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>
<a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a>sudo service haproxy reload
</code></pre></div>
<h3 id="post-extract"><code>post-extract</code></h3>
<ul>
<li>Description: Allows you to modify the contents of an app <em>after</em> it has been extracted from git/tarball but <em>before</em> the image source type is detected.</li>
<li>Invoked by: <code>dokku tar:in</code>, <code>dokku tar:from</code> and the <code>receive-app</code> plugin trigger</li>
<li>Arguments: <code>$APP</code> <code>$TMP_WORK_DIR</code> <code>$REV</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="c1"># Adds a clock process to an app&#39;s Procfile</span>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="nv">TMP_WORK_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="nv">REV</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span> <span class="c1"># optional, may not be sent for tar-based builds</span>
<a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>
<a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a><span class="nb">pushd</span> <span class="s2">&quot;</span><span class="nv">$TMP_WORK_DIR</span><span class="s2">&quot;</span> &gt;/dev/null
<a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a>touch Procfile
<a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a><span class="nb">echo</span> <span class="s2">&quot;clock: some-command&quot;</span> &gt;&gt; Procfile
<a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a><span class="nb">popd</span> &gt;/dev/null
</code></pre></div>
<h3 id="post-proxy-ports-update"><code>post-proxy-ports-update</code></h3>
<ul>
<li>Description: Allows you to run commands once the proxy port mappings for an app have been updated. It also sends the invoking command. This can be "add", "clear" or "remove".</li>
<li>Invoked by: <code>dokku proxy:ports-add</code>, <code>dokku proxy:ports-clear</code>, <code>dokku proxy:ports-remove</code></li>
<li>Arguments: <code>$APP</code> <code>action name</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="c1"># Rebuilds haproxy config for our imaginary haproxy plugin</span>
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="c1"># that replaces the nginx-vhosts plugin</span>
<a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>
<a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_AVAILABLE_PATH</span><span class="s2">/haproxy/functions&quot;</span>
<a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a>
<a id="__codelineno-68-10" name="__codelineno-68-10" href="#__codelineno-68-10"></a>haproxy-build-config <span class="s2">&quot;</span><span class="nv">$APP</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="post-release-buildpack"><code>post-release-buildpack</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Image mutation in this trigger may result in an invalid run state, and is heavily discouraged.</p>
</div>
<ul>
<li>Description: Allows you to run commands after environment variables are set for the release step of the deploy. Only applies to apps using buildpacks.</li>
<li>Invoked by: <code>internal function dokku_release() (release phase)</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>
<a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-release-cnb"><code>post-release-cnb</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The cnb plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Image mutation in this trigger may result in an invalid run state, and is heavily discouraged.</p>
</div>
<ul>
<li>Description: Allows you to run commands after environment variables are set for the release step of the deploy. Only applies to apps using cnb.</li>
<li>Invoked by: <code>internal function dokku_release() (release phase)</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>
<a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-release-dockerfile"><code>post-release-dockerfile</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Image mutation in this trigger may result in an invalid run state, and is heavily discouraged.</p>
</div>
<ul>
<li>Description: Allows you to run commands after environment variables are set for the release step of the deploy. Only applies to apps using a dockerfile.</li>
<li>Invoked by: <code>internal function dokku_release() (release phase)</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>
<a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="post-stop"><code>post-stop</code></h3>
<ul>
<li>Description: Can be used to run commands after an app is manually stopped</li>
<li>Invoked by: <code>dokku ps:stop</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="c1"># Marks an app as manually stopped</span>
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>
<a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a>
<a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a>
<a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a>dokku config:set --no-restart <span class="nv">$APP</span> <span class="nv">MANUALLY_STOPPED</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
<h3 id="pre-build-buildpack"><code>pre-build-buildpack</code></h3>
<ul>
<li>Description: Allows you to run commands before the build image is created for a given app. For instance, this can be useful to add env vars to your container. Only applies to apps using buildpacks.</li>
<li>Invoked by: <code>internal function dokku_build() (build phase)</code></li>
<li>Arguments: <code>$APP</code> <code>$SOURCECODE_WORK_DIR</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a>
<a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a>
<a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="pre-build-cnb"><code>pre-build-cnb</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The cnb plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run commands before the build image is created for a given app. For instance, this can be useful to add env vars to your container. Only applies to apps using cnb.</li>
<li>Invoked by: <code>internal function dokku_build() (build phase)</code></li>
<li>Arguments: <code>$APP</code> <code>$SOURCECODE_WORK_DIR</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>
<a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a>
<a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="pre-build-dockerfile"><code>pre-build-dockerfile</code></h3>
<ul>
<li>Description: Allows you to run commands before the build image is created for a given app. For instance, this can be useful to add env vars to your container. Only applies to apps using a dockerfile.</li>
<li>Invoked by: <code>internal function dokku_build() (build phase)</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>
<a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>
<a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="pre-delete"><code>pre-delete</code></h3>
<ul>
<li>Description: Can be used to run commands before an app is deleted.</li>
<li>Invoked by: <code>dokku apps:destroy</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a><span class="c1"># Clears out the gulp asset build cache for apps</span>
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a>
<a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a>
<a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">GULP_CACHE_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$DOKKU_ROOT</span><span class="s2">/</span><span class="nv">$APP</span><span class="s2">/gulp&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a>
<a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a><span class="k">if</span> <span class="o">[[</span> -d <span class="nv">$GULP_CACHE_DIR</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a id="__codelineno-76-10" name="__codelineno-76-10" href="#__codelineno-76-10"></a>  docker run <span class="s2">&quot;</span><span class="si">${</span><span class="nv">DOCKER_COMMIT_LABEL_ARGS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span> --rm -v <span class="s2">&quot;</span><span class="nv">$GULP_CACHE_DIR</span><span class="s2">:/gulp&quot;</span> <span class="s2">&quot;</span><span class="nv">$IMAGE</span><span class="s2">&quot;</span> find /gulp -depth -mindepth <span class="m">1</span> -maxdepth <span class="m">1</span> -exec rm -Rf <span class="o">{}</span> <span class="se">\;</span> <span class="o">||</span> <span class="nb">true</span>
<a id="__codelineno-76-11" name="__codelineno-76-11" href="#__codelineno-76-11"></a><span class="k">fi</span>
</code></pre></div>
<h3 id="pre-deploy"><code>pre-deploy</code></h3>
<ul>
<li>Description: Allows the running of code before the app's processes are scaled up and after the docker images are prepared.</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="c1"># Runs gulp in our container</span>
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a>
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a>
<a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a>dokku_log_info1 <span class="s2">&quot;Running gulp&quot;</span>
<a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a><span class="nv">CID</span><span class="o">=</span><span class="k">$(</span>docker run <span class="s2">&quot;</span><span class="si">${</span><span class="nv">DOCKER_COMMIT_LABEL_ARGS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span> -d <span class="nv">$IMAGE</span> /bin/bash -c <span class="s2">&quot;cd /app &amp;&amp; gulp default&quot;</span><span class="k">)</span>
<a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a><span class="nb">test</span> <span class="k">$(</span>docker <span class="nb">wait</span> <span class="nv">$CID</span><span class="k">)</span> -eq <span class="m">0</span>
<a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a><span class="nv">DOCKER_COMMIT_LABEL_ARGS</span><span class="o">=(</span><span class="s2">&quot;--change&quot;</span> <span class="s2">&quot;LABEL org.label-schema.schema-version=1.0&quot;</span> <span class="s2">&quot;--change&quot;</span> <span class="s2">&quot;LABEL org.label-schema.vendor=dokku&quot;</span> <span class="s2">&quot;--change&quot;</span> <span class="s2">&quot;LABEL com.dokku.app-name=</span><span class="nv">$APP</span><span class="s2">&quot;</span><span class="o">)</span>
<a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a>docker commit <span class="s2">&quot;</span><span class="si">${</span><span class="nv">DOCKER_COMMIT_LABEL_ARGS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="nv">$CID</span> <span class="nv">$IMAGE</span> &gt;/dev/null
</code></pre></div>
<h3 id="pre-disable-vhost"><code>pre-disable-vhost</code></h3>
<ul>
<li>Description: Allows you to run commands before the VHOST feature is disabled</li>
<li>Invoked by: <code>dokku domains:disable</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a>
<a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-78-6" name="__codelineno-78-6" href="#__codelineno-78-6"></a>
<a id="__codelineno-78-7" name="__codelineno-78-7" href="#__codelineno-78-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="pre-enable-vhost"><code>pre-enable-vhost</code></h3>
<ul>
<li>Description: Allows you to run commands before the VHOST feature is enabled</li>
<li>Invoked by: <code>dokku domains:enable</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>
<a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="pre-receive-app"><code>pre-receive-app</code></h3>
<ul>
<li>Description: Allows you to customize the contents of an app directory before they are processed for deployment. The <code>IMAGE_SOURCE_TYPE</code> can be any of <code>[herokuish, dockerfile]</code></li>
<li>Invoked by: <code>dokku git-hook</code>, <code>dokku tar-build-locked</code></li>
<li>Arguments: <code>$APP $IMAGE_SOURCE_TYPE $TMP_WORK_DIR $REV</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="c1"># Adds a file called `dokku-is-awesome` to the repository</span>
<a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="c1"># the contents will be the app name</span>
<a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a>
<a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-80-6" name="__codelineno-80-6" href="#__codelineno-80-6"></a>
<a id="__codelineno-80-7" name="__codelineno-80-7" href="#__codelineno-80-7"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_SOURCE_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">TMP_WORK_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">REV</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$4</span><span class="s2">&quot;</span>
<a id="__codelineno-80-8" name="__codelineno-80-8" href="#__codelineno-80-8"></a>
<a id="__codelineno-80-9" name="__codelineno-80-9" href="#__codelineno-80-9"></a><span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$APP</span><span class="s2">&quot;</span> &gt; <span class="s2">&quot;</span><span class="nv">$TMP_WORK_DIR</span><span class="s2">/dokku-is-awesome&quot;</span>
</code></pre></div>
<h3 id="pre-release-buildpack"><code>pre-release-buildpack</code></h3>
<ul>
<li>Description: Allows you to run commands before environment variables are set for the release step of the deploy. Only applies to apps using buildpacks.</li>
<li>Invoked by: <code>internal function dokku_release() (release phase)</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="c1"># Installs the graphicsmagick package into the container</span>
<a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a>
<a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a>
<a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a>dokku_log_info1 <span class="s2">&quot;Installing GraphicsMagick...&quot;</span>
<a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a>
<a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a><span class="nv">CMD</span><span class="o">=</span><span class="s2">&quot;cat &gt; gm &amp;&amp; \</span>
<a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a><span class="s2">  dpkg -s graphicsmagick &gt;/dev/null 2&gt;&amp;1 || \</span>
<a id="__codelineno-81-12" name="__codelineno-81-12" href="#__codelineno-81-12"></a><span class="s2">  (apt-get update -qq &amp;&amp; apt-get -qq -y --no-install-recommends install graphicsmagick &amp;&amp; apt-get clean)&quot;</span>
<a id="__codelineno-81-13" name="__codelineno-81-13" href="#__codelineno-81-13"></a>
<a id="__codelineno-81-14" name="__codelineno-81-14" href="#__codelineno-81-14"></a><span class="nv">CID</span><span class="o">=</span><span class="k">$(</span>docker run <span class="nv">$DOKKU_GLOBAL_RUN_ARGS</span> -i -a stdin <span class="nv">$IMAGE</span> /bin/bash -c <span class="s2">&quot;</span><span class="nv">$CMD</span><span class="s2">&quot;</span><span class="k">)</span>
<a id="__codelineno-81-15" name="__codelineno-81-15" href="#__codelineno-81-15"></a><span class="nb">test</span> <span class="k">$(</span>docker <span class="nb">wait</span> <span class="nv">$CID</span><span class="k">)</span> -eq <span class="m">0</span>
<a id="__codelineno-81-16" name="__codelineno-81-16" href="#__codelineno-81-16"></a><span class="nv">DOCKER_COMMIT_LABEL_ARGS</span><span class="o">=(</span><span class="s2">&quot;--change&quot;</span> <span class="s2">&quot;LABEL org.label-schema.schema-version=1.0&quot;</span> <span class="s2">&quot;--change&quot;</span> <span class="s2">&quot;LABEL org.label-schema.vendor=dokku&quot;</span> <span class="s2">&quot;--change&quot;</span> <span class="s2">&quot;LABEL com.dokku.app-name=</span><span class="nv">$APP</span><span class="s2">&quot;</span><span class="o">)</span>
<a id="__codelineno-81-17" name="__codelineno-81-17" href="#__codelineno-81-17"></a>docker commit <span class="s2">&quot;</span><span class="si">${</span><span class="nv">DOCKER_COMMIT_LABEL_ARGS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="nv">$CID</span> <span class="nv">$IMAGE</span> &gt;/dev/null
</code></pre></div>
<h3 id="pre-release-cnb"><code>pre-release-cnb</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The cnb plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run commands before environment variables are set for the release step of the deploy. Only applies to apps using cnb.</li>
<li>Invoked by: <code>internal function dokku_release() (release phase)</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a>
<a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a>
<a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="pre-release-dockerfile"><code>pre-release-dockerfile</code></h3>
<ul>
<li>Description: Allows you to run commands before environment variables are set for the release step of the deploy. Only applies to apps using a dockerfile.</li>
<li>Invoked by: <code>internal function dokku_release() (release phase)</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="nb">source</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN_CORE_AVAILABLE_PATH</span><span class="s2">/common/functions&quot;</span>
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>
<a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="pre-restore"><code>pre-restore</code></h3>
<ul>
<li>Description: Allows you to run commands before all containers are restored</li>
<li>Invoked by: <code>dokku ps:restore</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-84-5" name="__codelineno-84-5" href="#__codelineno-84-5"></a>
<a id="__codelineno-84-6" name="__codelineno-84-6" href="#__codelineno-84-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="pre-start"><code>pre-start</code></h3>
<ul>
<li>Description: Can be used to run commands before an app is started</li>
<li>Invoked by: <code>dokku ps:start</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="c1"># Notifies an example url that an app is starting</span>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>
<a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a>
<a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a>curl <span class="s2">&quot;https://dokku.me/starting/</span><span class="si">${</span><span class="nv">APP</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">||</span> <span class="nb">true</span>
</code></pre></div>
<h3 id="procfile-extract"><code>procfile-extract</code></h3>
<ul>
<li>Description: Extracts a Procfile from a given image to a path</li>
<li>Invoked by: <code>internally</code></li>
<li>Arguments: <code>$APP $IMAGE</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
<a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a>
<a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="procfile-get-command"><code>procfile-get-command</code></h3>
<ul>
<li>Description: Fetches the command for a specific process type</li>
<li>Invoked by: <code>internally</code></li>
<li>Arguments: <code>$APP $PROCESS_TYPE $PORT</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a>
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="procfile-remove"><code>procfile-remove</code></h3>
<ul>
<li>Description: Removes the extracted Procfile</li>
<li>Invoked by: <code>internally</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>
<a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="proxy-build-config"><code>proxy-build-config</code></h3>
<ul>
<li>Description: Builds the proxy implementation configuration for a given app</li>
<li>Invoked by: <code>internally triggered by ps:restore</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a>
<a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a>
<a id="__codelineno-89-5" name="__codelineno-89-5" href="#__codelineno-89-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="proxy-clear-config"><code>proxy-clear-config</code></h3>
<ul>
<li>Description: Clears the proxy implementation configuration for a given app</li>
<li>Invoked by: <code>internally triggered by apps:rename</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>
<a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a>
<a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="proxy-disable"><code>proxy-disable</code></h3>
<ul>
<li>Description: Disables the configured proxy implementation for an app</li>
<li>Invoked by: <code>internally triggered by ps:restore</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>
<a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a>
<a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="proxy-enable"><code>proxy-enable</code></h3>
<ul>
<li>Description: Enables the configured proxy implementation for an app</li>
<li>Invoked by: <code>internally triggered by ps:restore</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>
<a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a>
<a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="proxy-is-enabled"><code>proxy-is-enabled</code></h3>
<ul>
<li>Description: Checks if there is a proxy enabled for the app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>
<a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a>
<a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="proxy-type"><code>proxy-type</code></h3>
<ul>
<li>Description: Returns the proxy type for an app</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a>
<a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="receive-app"><code>receive-app</code></h3>
<ul>
<li>Description: Allows you to customize what occurs when an app is received. Normally just triggers an app build.</li>
<li>Invoked by: <code>dokku git-hook</code>, <code>dokku ps:rebuild</code></li>
<li>Arguments: <code>$APP $REV</code> (<code>$REV</code> may not be included in cases where a repository is not pushed)</li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a><span class="c1"># For our imaginary mercurial plugin, triggers a rebuild</span>
<a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>
<a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a>
<a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">REV</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a>
<a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a>dokku hg-build <span class="nv">$APP</span> <span class="nv">$REV</span>
</code></pre></div>
<h3 id="receive-branch"><code>receive-branch</code></h3>
<ul>
<li>Description: Allows you to customize what occurs when a specific branch is received. Can be used to add support for specific branch names</li>
<li>Invoked by: <code>dokku git-hook</code>, <code>dokku ps:rebuild</code></li>
<li>Arguments: <code>$APP $REV $REFNAME</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a><span class="c1"># Gives Dokku the ability to support multiple branches for a given service</span>
<a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a><span class="c1"># Allowing you to have multiple staging environments on a per-branch basis</span>
<a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a>
<a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a><span class="nv">reference_app</span><span class="o">=</span><span class="nv">$1</span>
<a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a><span class="nv">refname</span><span class="o">=</span><span class="nv">$3</span>
<a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a><span class="nv">newrev</span><span class="o">=</span><span class="nv">$2</span>
<a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a><span class="nv">APP</span><span class="o">=</span><span class="si">${</span><span class="nv">refname</span><span class="p">/*</span><span class="se">\/</span><span class="p">/</span><span class="si">}</span>.<span class="nv">$reference_app</span>
<a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a>
<a id="__codelineno-96-10" name="__codelineno-96-10" href="#__codelineno-96-10"></a><span class="k">if</span> <span class="o">[[</span> ! -d <span class="s2">&quot;</span><span class="nv">$DOKKU_ROOT</span><span class="s2">/</span><span class="nv">$APP</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a id="__codelineno-96-11" name="__codelineno-96-11" href="#__codelineno-96-11"></a>  <span class="nv">REFERENCE_REPO</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$DOKKU_ROOT</span><span class="s2">/</span><span class="nv">$reference_app</span><span class="s2">&quot;</span>
<a id="__codelineno-96-12" name="__codelineno-96-12" href="#__codelineno-96-12"></a>  git clone --bare --shared --reference <span class="s2">&quot;</span><span class="nv">$REFERENCE_REPO</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$REFERENCE_REPO</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$DOKKU_ROOT</span><span class="s2">/</span><span class="nv">$APP</span><span class="s2">&quot;</span> &gt;/dev/null
<a id="__codelineno-96-13" name="__codelineno-96-13" href="#__codelineno-96-13"></a><span class="k">fi</span>
<a id="__codelineno-96-14" name="__codelineno-96-14" href="#__codelineno-96-14"></a>plugn trigger receive-app <span class="nv">$APP</span> <span class="nv">$newrev</span>
</code></pre></div>
<h3 id="release-and-deploy"><code>release-and-deploy</code></h3>
<ul>
<li>Description: Triggers a release of the image tag and a subsequent deploy</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>
<a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="report"><code>report</code></h3>
<ul>
<li>Description: Allows you to report on any custom configuration in use by your application</li>
<li>Invoked by: <code>dokku report</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>
<a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a>
<a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="resource-get-property"><code>resource-get-property</code></h3>
<ul>
<li>Description: Fetches a given resource property value</li>
<li>Invoked by:</li>
<li>Arguments: <code>$APP</code> <code>$PROC_TYPE</code> <code>$RESOURCE_TYPE</code> <code>$PROPERTY</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>
<a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">PROC_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span> <span class="nv">RESOURCE_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span> <span class="nv">PROPERTY</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$4</span><span class="s2">&quot;</span>
<a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a>
<a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="retire-container-failed"><code>retire-container-failed</code></h3>
<ul>
<li>Description: Allows you to run commands if/when retiring old containers has failed</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a><span class="c1"># Send an email when a container failed to retire</span>
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">HOSTNAME</span><span class="o">=</span><span class="k">$(</span>hostname -s<span class="k">)</span>
<a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a>
<a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a>mail -s <span class="s2">&quot;</span><span class="nv">$APP</span><span class="s2"> containers on </span><span class="nv">$HOSTNAME</span><span class="s2"> failed to retire&quot;</span> ops@dokku.me
</code></pre></div>
<h3 id="scheduler-app-status"><code>scheduler-app-status</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Fetch the status of an app</li>
<li>Invoked by: <code>dokku ps:report</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>
<a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a>
<a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-deploy"><code>scheduler-deploy</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when an app is deployed</li>
<li>Invoked by: <code>dokku deploy</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a>
<a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-docker-cleanup"><code>scheduler-docker-cleanup</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when dokku cleanup is invoked</li>
<li>Invoked by: <code>dokku deploy, dokku cleanup</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $FORCE_CLEANUP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">FORCE_CLEANUP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>
<a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-enter"><code>scheduler-enter</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to enter a running container for a given app</li>
<li>Invoked by: <code>dokku enter</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $@</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>
<a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">ARGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a>
<a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-inspect"><code>scheduler-inspect</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run inspect commands for all containers for a given app</li>
<li>Invoked by: <code>dokku ps:inspect</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>
<a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>
<a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-is-deployed"><code>scheduler-is-deployed</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to check if an app has been deployed</li>
<li>Invoked by: <code>dokku ps:rebuild</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
<a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>
<a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-logs"><code>scheduler-logs</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when retrieving container logs</li>
<li>Invoked by: <code>dokku logs:failed</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $PROCESS_TYPE $TAIL $PRETTY_PRINT $NUM</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>
<a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">PROCESS_TYPE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">TAIL</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$4</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">PRETTY_PRINT</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$5</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">NUM</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$6</span><span class="s2">&quot;</span>
<a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a>
<a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-logs-failed"><code>scheduler-logs-failed</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when retrieving failed container logs</li>
<li>Invoked by: <code>dokku logs:failed</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>
<a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a>
<a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-post-delete"><code>scheduler-post-delete</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when an app is deleted</li>
<li>Invoked by: <code>dokku apps:destroy</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>
<a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a>
<a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-post-run"><code>scheduler-post-run</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands after a <code>dokku run</code> invocation is called</li>
<li>Invoked by: <code>dokku run</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $CONTAINER_ID</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>
<a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">CONTAINER_ID</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a>
<a id="__codelineno-110-6" name="__codelineno-110-6" href="#__codelineno-110-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-register-retired"><code>scheduler-register-retired</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows scheduling retiring a local container and any related images</li>
<li>Invoked by: <code>internally</code></li>
<li>Arguments: <code>$APP $CONTAINER_ID</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>
<a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-111-4" name="__codelineno-111-4" href="#__codelineno-111-4"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-111-5" name="__codelineno-111-5" href="#__codelineno-111-5"></a><span class="nv">CONTAINER_ID</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-111-6" name="__codelineno-111-6" href="#__codelineno-111-6"></a>
<a id="__codelineno-111-7" name="__codelineno-111-7" href="#__codelineno-111-7"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-retire"><code>scheduler-retire</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when containers should be force retired from the system</li>
<li>Invoked by: <code>dokku run</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a>
<a id="__codelineno-112-3" name="__codelineno-112-3" href="#__codelineno-112-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-112-4" name="__codelineno-112-4" href="#__codelineno-112-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-112-5" name="__codelineno-112-5" href="#__codelineno-112-5"></a>
<a id="__codelineno-112-6" name="__codelineno-112-6" href="#__codelineno-112-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-run"><code>scheduler-run</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when a command is executed for your app</li>
<li>Invoked by: <code>dokku run</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP ...ARGS</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a>
<a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">ARGS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="p">@:</span><span class="nv">3</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a>
<a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-stop"><code>scheduler-stop</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when a tag is destroyed</li>
<li>Invoked by: <code>dokku apps:destroy, dokku ps:stop</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $REMOVE_CONTAINERS</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a>
<a id="__codelineno-114-3" name="__codelineno-114-3" href="#__codelineno-114-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-114-4" name="__codelineno-114-4" href="#__codelineno-114-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">REMOVE_CONTAINERS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-114-5" name="__codelineno-114-5" href="#__codelineno-114-5"></a>
<a id="__codelineno-114-6" name="__codelineno-114-6" href="#__codelineno-114-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-tags-create"><code>scheduler-tags-create</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when a tag is created</li>
<li>Invoked by: <code>dokku tags:create</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $SOURCE_IMAGE $TARGET_IMAGE</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a>
<a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-115-4" name="__codelineno-115-4" href="#__codelineno-115-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span> <span class="nv">SOURCE_IMAGE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span> <span class="nv">TARGET_IMAGE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$4</span><span class="s2">&quot;</span>
<a id="__codelineno-115-5" name="__codelineno-115-5" href="#__codelineno-115-5"></a>
<a id="__codelineno-115-6" name="__codelineno-115-6" href="#__codelineno-115-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="scheduler-tags-destroy"><code>scheduler-tags-destroy</code></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scheduler plugin trigger apis are under development and may change
between minor releases until the 1.0 release.</p>
</div>
<ul>
<li>Description: Allows you to run scheduler commands when a tag is destroyed</li>
<li>Invoked by: <code>dokku tags:destroy</code></li>
<li>Arguments: <code>$DOKKU_SCHEDULER $APP $IMAGE_REPO $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a>
<a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a><span class="nv">DOKKU_SCHEDULER</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_REPO</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$3</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$4</span><span class="s2">&quot;</span><span class="p">;</span>
<a id="__codelineno-116-5" name="__codelineno-116-5" href="#__codelineno-116-5"></a>
<a id="__codelineno-116-6" name="__codelineno-116-6" href="#__codelineno-116-6"></a><span class="c1"># TODO</span>
</code></pre></div>
<h3 id="tags-create"><code>tags-create</code></h3>
<ul>
<li>Description: Allows you to run commands once a tag for an app image has been added</li>
<li>Invoked by: <code>dokku tags:create</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a><span class="c1"># Upload an app image to docker hub</span>
<a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a>
<a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE</span><span class="o">=</span><span class="k">$(</span>get_app_image_name <span class="nv">$APP</span> <span class="nv">$IMAGE_TAG</span><span class="k">)</span>
<a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a>
<a id="__codelineno-117-7" name="__codelineno-117-7" href="#__codelineno-117-7"></a><span class="nv">IMAGE_ID</span><span class="o">=</span><span class="k">$(</span>docker inspect --format <span class="s1">&#39;{{ .Id }}&#39;</span> <span class="nv">$IMAGE</span><span class="k">)</span>
<a id="__codelineno-117-8" name="__codelineno-117-8" href="#__codelineno-117-8"></a>docker tag -f <span class="nv">$IMAGE_ID</span> <span class="nv">$DOCKER_HUB_USER</span>/<span class="nv">$APP</span>:<span class="nv">$IMAGE_TAG</span>
<a id="__codelineno-117-9" name="__codelineno-117-9" href="#__codelineno-117-9"></a>docker push <span class="nv">$DOCKER_HUB_USER</span>/<span class="nv">$APP</span>:<span class="nv">$IMAGE_TAG</span>
</code></pre></div>
<h3 id="tags-destroy"><code>tags-destroy</code></h3>
<ul>
<li>Description: Allows you to run commands once a tag for an app image has been removed</li>
<li>Invoked by: <code>dokku tags:destroy</code></li>
<li>Arguments: <code>$APP $IMAGE_TAG</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a><span class="c1"># Remove an image tag from docker hub</span>
<a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>
<a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a><span class="nv">APP</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nv">IMAGE_TAG</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>
<a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a>
<a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a><span class="c1"># some code to remove a docker hub tag because it&#39;s not implemented in the CLI...</span>
</code></pre></div>
<h3 id="uninstall"><code>uninstall</code></h3>
<ul>
<li>Description: Used to cleanup after itself.</li>
<li>Invoked by: <code>dokku plugin:uninstall</code></li>
<li>Arguments: <code>$PLUGIN</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a><span class="c1"># Cleanup up extra containers created</span>
<a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a>
<a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-119-5" name="__codelineno-119-5" href="#__codelineno-119-5"></a>
<a id="__codelineno-119-6" name="__codelineno-119-6" href="#__codelineno-119-6"></a><span class="nv">PLUGIN</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<a id="__codelineno-119-7" name="__codelineno-119-7" href="#__codelineno-119-7"></a>
<a id="__codelineno-119-8" name="__codelineno-119-8" href="#__codelineno-119-8"></a><span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$PLUGIN</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;my-plugin&quot;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> docker rmi -f <span class="s2">&quot;</span><span class="si">${</span><span class="nv">PLUGIN_IMAGE_DEPENDENCY</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<blockquote>
<p>To avoid uninstalling other plugins make sure to check the plugin name like shown in the example.</p>
</blockquote>
<h3 id="update"><code>update</code></h3>
<ul>
<li>Description: Can be used to run plugin updates on a regular interval. You can schedule the invoker in a cron-task to ensure your system gets regular updates.</li>
<li>Invoked by: <code>dokku plugin:update</code>.</li>
<li>Arguments: None</li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a><span class="c1"># Update the herokuish image from git source</span>
<a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>
<a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a>
<a id="__codelineno-120-6" name="__codelineno-120-6" href="#__codelineno-120-6"></a><span class="nb">cd</span> /root/dokku
<a id="__codelineno-120-7" name="__codelineno-120-7" href="#__codelineno-120-7"></a>sudo <span class="nv">BUILD_STACK</span><span class="o">=</span><span class="nb">true</span> make install
</code></pre></div>
<h3 id="user-auth"><code>user-auth</code></h3>
<p>This is a special plugin trigger that is executed on <em>every</em> command run. As Dokku sometimes internally invokes the <code>dokku</code> command, special care should be taken to properly handle internal command redirects.</p>
<p>Note that the trigger should exit as follows:</p>
<ul>
<li><code>0</code> to continue running as normal</li>
<li><code>1</code> to halt execution of the command</li>
</ul>
<p>The <code>SSH_USER</code> is the original ssh user. If you are running remote commands, this user will typically be <code>dokku</code>, and as such should not be trusted when checking permissions. If you are connected via ssh as a different user who then invokes <code>dokku</code>, the value of this variable will be that user's name (<code>root</code>, <code>myuser</code>, etc.).</p>
<p>The <code>SSH_NAME</code> is the <code>NAME</code> variable set via the <code>sshcommand acl-add</code> command. If you have set a user via the <code>dokku-installer</code>, this value will be set to <code>admin</code>. For installs via debian package, this value <em>may</em> be <code>default</code>. For reference, the following command can be run as the root user to specify a specific <code>NAME</code> for a given ssh key:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a>sshcommand acl-add dokku NAME &lt; <span class="nv">$PATH_TO_SSH_KEY</span>
</code></pre></div>
<p>Note that the <code>NAME</code> value is set at the first ssh key match. If an ssh key is set in the <code>/home/dokku/.ssh/authorized_keys</code> multiple times, the first match will decide the value.</p>
<ul>
<li>Description: Allows you to deny access to a Dokku command by either ssh user or associated ssh-command NAME user.</li>
<li>Invoked by: <code>dokku</code></li>
<li>Arguments: <code>$SSH_USER $SSH_NAME $DOKKU_COMMAND</code></li>
<li>Example:</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a><span class="c1"># Allow root/admin users to do everything</span>
<a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a><span class="c1"># Deny plugin access to default users</span>
<a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a><span class="c1"># Allow access to all other commands</span>
<a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a>
<a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a><span class="nb">set</span> -eo pipefail<span class="p">;</span> <span class="o">[[</span> <span class="nv">$DOKKU_TRACE</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">set</span> -x
<a id="__codelineno-122-7" name="__codelineno-122-7" href="#__codelineno-122-7"></a>
<a id="__codelineno-122-8" name="__codelineno-122-8" href="#__codelineno-122-8"></a><span class="nv">SSH_USER</span><span class="o">=</span><span class="nv">$1</span>
<a id="__codelineno-122-9" name="__codelineno-122-9" href="#__codelineno-122-9"></a><span class="nv">SSH_NAME</span><span class="o">=</span><span class="nv">$2</span>
<a id="__codelineno-122-10" name="__codelineno-122-10" href="#__codelineno-122-10"></a><span class="nb">shift</span> <span class="m">2</span>
<a id="__codelineno-122-11" name="__codelineno-122-11" href="#__codelineno-122-11"></a><span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$SSH_USER</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;root&quot;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">0</span>
<a id="__codelineno-122-12" name="__codelineno-122-12" href="#__codelineno-122-12"></a><span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$SSH_NAME</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;admin&quot;</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">0</span>
<a id="__codelineno-122-13" name="__codelineno-122-13" href="#__codelineno-122-13"></a><span class="o">[[</span> <span class="s2">&quot;</span><span class="nv">$SSH_NAME</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span> <span class="o">&amp;&amp;</span> <span class="nv">$1</span> <span class="o">==</span> plugin:* <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">1</span>
<a id="__codelineno-122-14" name="__codelineno-122-14" href="#__codelineno-122-14"></a><span class="nb">exit</span> <span class="m">0</span>
</code></pre></div>




              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../plugin-creation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Plugin creation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Plugin creation
            </div>
          </div>
        </a>
      
      
        
        <a href="../testing/" class="md-footer__link md-footer__link--next" aria-label="Next: Running Tests" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Running Tests
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/dokku/dokku" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/dokku/dokku/issues" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M352 96v3.56c0 15.74-12.7 28.44-28.4 28.44H188.4c-15.7 0-29.3-12.7-29.3-28.44V96c0-53.02 43-96 96-96C309 0 352 42.98 352 96zm-310.63 9.4c12.5-12.52 32.76-12.52 45.26 0l63.97 64c.7.6 1.3 1.3 1.9 2 14.3-7.3 30.4-11.4 46.6-11.4H312c17.1 0 33.2 4.1 47.5 11.4.6-.7 1.2-1.4 1.9-2l64-64c12.5-12.52 32.7-12.52 45.2 0 12.5 12.5 12.5 32.7 0 45.2l-64 64c-1.5.7-1.3 1.3-2 1.9 6.1 12 10 25.4 11.1 39.5H480c17.7 0 32 14.3 32 32s-14.3 32-32 32h-64c0 24.6-5.5 47.8-15.4 68.6 2.1 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.7 0 45.2s-32.7 12.5-45.2 0l-63.1-63c-24.5 21.8-55.8 36.2-90.3 39.6V240c0-8.8-7.2-16-16.9-16-7.9 0-16 7.2-16 16v239.2c-33.6-3.4-64.9-17.8-89.4-39.6l-63.07 63c-12.5 12.5-32.76 12.5-45.26 0-12.49-12.5-12.49-32.7 0-45.2l64.03-64c1.8-1.9 3.9-3.5 6-4.8-9.9-20.8-15.4-44-15.4-68.6H32c-17.67 0-32-14.3-32-32s14.33-32 32-32h64.3c1.08-14.1 5-27.5 11.1-39.5-.7-.6-1.4-1.2-2-1.9l-64.03-64c-12.49-12.5-12.49-32.7 0-45.2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://discord.gg/YQjANGMZvu" target="_blank" rel="noopener" title="discord.gg" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://slack.dokku.com/" target="_blank" rel="noopener" title="slack.dokku.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://webchat.libera.chat/?channels=dokku" target="_blank" rel="noopener" title="webchat.libera.chat" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 127.1h-58.23l9.789-58.74c2.906-17.44-8.875-33.92-26.3-36.83-17.53-2.875-33.92 8.891-36.83 26.3L292.9 127.1h-95.1l9.789-58.74c2.906-17.44-8.875-33.92-26.3-36.83-17.53-2.875-33.92 8.891-36.83 26.3L132.9 127.1H64c-17.67 0-32 14.33-32 32 0 18.6 14.33 32 32 32h58.23l-21.33 128H32c-17.67 0-32 14.33-32 32s14.33 31.1 32 31.1h58.23l-9.789 58.74c-2.906 17.44 8.875 33.92 26.3 36.83C108.5 479.9 110.3 480 112 480c15.36 0 28.92-11.09 31.53-26.73L155.07 384h95.12l-9.789 58.74c-2.906 17.44 8.875 33.92 26.3 36.83 1.799.33 3.599.43 5.299.43 15.36 0 28.92-11.09 31.53-26.73L315.07 384H384c17.67 0 32-14.33 32-31.1 0-17.67-14.33-32-32-32h-58.23l21.33-128H416c17.67 0 32-14.32 32-31.1 0-19.5-14.3-34.7-32-34.7zm-155.1 192h-95.1l21.3-128h95.12l-21.32 128z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/dokku" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/dokku/dokku/discussions" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 176C416 78.8 322.9 0 208 0S0 78.8 0 176c0 39.57 15.62 75.96 41.67 105.4-16.39 32.76-39.23 57.32-39.59 57.68-2.1 2.205-2.67 5.475-1.441 8.354C1.9 350.3 4.602 352 7.66 352c38.35 0 70.76-11.12 95.74-24.04C134.2 343.1 169.8 352 208 352c114.9 0 208-78.8 208-176zm183.6 267.7C624.8 413.9 640 376.6 640 336c0-97.2-86-176-192-176-.315 0-.62.041-.934.043C447.5 165.3 448 170.6 448 176c0 98.62-79.68 181.2-186.1 202.5C282.7 455.1 357.1 512 448 512c33.69 0 65.32-8.008 92.85-21.98C565.2 502 596.1 512 632.3 512c3.059 0 5.76-1.725 7.02-4.605 1.229-2.879.658-6.148-1.441-8.354C637.6 498.7 615.9 475.3 599.6 443.7z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://dokku.dpdcart.com/cart/add?product_id=217344&method_id=236878" target="_blank" rel="noopener" title="dokku.dpdcart.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M96 0c11.5 0 21.4 8.19 23.6 19.51L121.1 32h420.7c20.3 0 36.5 20.25 30.8 40.66l-54 192.04c-3.9 13.8-16.5 23.3-30.8 23.3H170.7l9.2 48H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H159.1c-10.6 0-20.5-8.2-22.7-19.5L76.14 48H24C10.75 48 0 37.25 0 24S10.75 0 24 0h72zm32 464c0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48-48-21.5-48-48zm384 0c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "search.highlight"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
  
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    

  <!-- Extra JavaScript (can't be set in mkdocs.yml due to content hash) -->
  <script src="../../overrides/assets/javascripts/bundle.js"></script>

  </body>
</html>