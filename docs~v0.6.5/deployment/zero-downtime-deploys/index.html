<!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://dokku.com/docs/deployment/zero-downtime-deploys/">
      
      <link rel="icon" href="../../assets/favicons/favicon-96x96.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.2">
    
    
      
        <title>Zero Downtime Deploys - Dokku Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M248.8 4.994C249.9 1.99 252.8 0 256 0s6.1 1.99 7.2 4.994l14.1 37.676L315 56.79c3 1.13 5 4 5 7.21s-2 6.08-5 7.21l-37.7 14.12L263.2 123c-1.1 3-4 5-7.2 5s-6.1-2-7.2-5l-14.1-37.67-38.6-14.12c-3-1.13-4.1-4-4.1-7.21s1.1-6.08 4.1-7.21l38.6-14.12 14.1-37.676zm178.6 9.066c18.8-18.746 49.2-18.746 67.9 0l34.6 34.58c18.7 18.74 18.7 49.14 0 67.86L148.5 497.9c-18.7 18.7-49.12 18.7-67.86 0l-34.58-34.6c-18.75-18.7-18.75-49.1 0-67.9L427.4 14.06zm34 45.25L356.3 164.3l23.3 23.3 105-105.02-23.2-23.27zM7.491 117.2 64 96l21.19-56.51C86.88 34.98 91.19 32 96 32c4.8 0 9.1 2.98 10.8 7.49L128 96l56.5 21.2c4.5 1.7 7.5 6 7.5 10.8 0 4.8-3 9.1-7.5 10.8L128 160l-21.2 56.5c-1.7 4.5-6 7.5-10.8 7.5-4.81 0-9.12-3-10.81-7.5L64 160 7.491 138.8C2.985 137.1 0 132.8 0 128c0-4.8 2.985-9.1 7.491-10.8zm352.009 256L416 352l21.2-56.5c1.7-5.4 6-7.5 10.8-7.5 4.8 0 9.1 2.1 10.8 7.5L480 352l56.5 21.2c4.5 1.7 7.5 6 7.5 10.8 0 4.8-3 9.1-7.5 10.8L480 416l-21.2 56.5c-1.7 4.5-6 7.5-10.8 7.5-4.8 0-9.1-3-10.8-7.5L416 416l-56.5-21.2c-5.4-1.7-7.5-6-7.5-10.8 0-4.8 2.1-9.1 7.5-10.8z"/></svg>');}</style>

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    

  <!-- Extra style sheets (can't be set in mkdocs.yml due to content hash) -->
  <link
    rel="stylesheet"
    href="../../overrides/assets/stylesheets/main.css"
  />

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#zero-downtime-deploys" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  <a href="https://twitter.com/dokku">
    For updates follow <strong>@dokku</strong> on
    <span class="twemoji twitter">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </span>
    <strong>Twitter</strong>
  </a>

          </div>
          
        </aside>
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Dokku Documentation" class="md-header__button md-logo" aria-label="Dokku Documentation" data-md-component="logo">
      
  <img src="../../assets/dokku-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dokku Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Zero Downtime Deploys
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dokku/dokku" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/installation/" class="md-tabs__link md-tabs__link--active">
        Docs
      </a>
    </li>
  

  

  

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://pro.dokku.com/docs/getting-started/" class="md-tabs__link">
      Pro
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://pro.dokku.com/blog/" class="md-tabs__link">
      Blog
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://dokku.dpdcart.com/cart/add?product_id=217344&method_id=236878" class="md-tabs__link">
      Purchase Dokku Pro
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Dokku Documentation" class="md-nav__button md-logo" aria-label="Dokku Documentation" data-md-component="logo">
      
  <img src="../../assets/dokku-logo.svg" alt="logo">

    </a>
    Dokku Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dokku/dokku" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1">
          Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1" type="checkbox" id="__nav_1_1" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_1">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_1" type="checkbox" id="__nav_1_1_1" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_1_1">
          Getting Started with Dokku
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started with Dokku" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started with Dokku
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        Getting Started with Dokku
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/advanced-installation/" class="md-nav__link">
        Advanced installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/azure/" class="md-nav__link">
        Microsoft Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/debian/" class="md-nav__link">
        Debian Package Installation Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/digitalocean/" class="md-nav__link">
        Digital Ocean
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/linode/" class="md-nav__link">
        Installing on Linode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/vagrant/" class="md-nav__link">
        Install Dokku using Vagrant
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_1_2" type="checkbox" id="__nav_1_1_2" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_1_2">
          Upgrading
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Upgrading" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_1_2">
          <span class="md-nav__icon md-icon"></span>
          Upgrading
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/upgrading/" class="md-nav__link">
        Upgrading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.6.0-migration-guide/" class="md-nav__link">
        0.6.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendices/0.5.0-migration-guide/" class="md-nav__link">
        0.5.0 Migration Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/where-to-get-help/" class="md-nav__link">
        Where to Get Help
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deployment" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../application-deployment/" class="md-nav__link">
        Deploying to Dokku
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../application-management/" class="md-nav__link">
        Application Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../remote-commands/" class="md-nav__link">
        Remote Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../one-off-processes/" class="md-nav__link">
        One-off Processes and Cron
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../process-management/" class="md-nav__link">
        Process/Container management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../user-management/" class="md-nav__link">
        User Management
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Zero Downtime Deploys
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Zero Downtime Deploys
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#checks" class="md-nav__link">
    Checks
  </a>
  
    <nav class="md-nav" aria-label="Checks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-instructions" class="md-nav__link">
    Check Instructions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-settings" class="md-nav__link">
    Check Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-docker-stop-timeout" class="md-nav__link">
    Configuring docker stop timeout
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-successful-rails-deployment" class="md-nav__link">
    Example: Successful Rails Deployment
  </a>
  
    <nav class="md-nav" aria-label="Example: Successful Rails Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checks-file" class="md-nav__link">
    CHECKS file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-output" class="md-nav__link">
    Deploy Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-failing-rails-deployment" class="md-nav__link">
    Example: Failing Rails Deployment
  </a>
  
    <nav class="md-nav" aria-label="Example: Failing Rails Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checks-file_1" class="md-nav__link">
    CHECKS file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-output_1" class="md-nav__link">
    Deploy Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_3">
          Deployment Methods
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deployment Methods" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          Deployment Methods
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../methods/buildpacks/" class="md-nav__link">
        Buildpack Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../methods/dockerfiles/" class="md-nav__link">
        Dockerfile Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../methods/images/" class="md-nav__link">
        Image Tag Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../methods/tar/" class="md-nav__link">
        Tarfile Deployment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_4">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/environment-variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/dns/" class="md-nav__link">
        DNS Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/domains/" class="md-nav__link">
        Domain Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/nginx/" class="md-nav__link">
        Nginx Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/ssl/" class="md-nav__link">
        SSL Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_5">
          Advanced Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced Usage" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          Advanced Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/backup-recovery/" class="md-nav__link">
        Backup and Recovery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/deployment-tasks/" class="md-nav__link">
        Deployment Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/docker-options/" class="md-nav__link">
        Docker Container Options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/event-logs/" class="md-nav__link">
        Dokku Event Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/persistent-storage/" class="md-nav__link">
        Persistent Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/proxy-management/" class="md-nav__link">
        Proxy Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-usage/repository-management/" class="md-nav__link">
        Repository Management
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_6">
          Community Contributions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Community Contributions" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          Community Contributions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/clients/" class="md-nav__link">
        Clients
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7" type="checkbox" id="__nav_1_7" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_7">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_7">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/plugin-creation/" class="md-nav__link">
        Plugin Creation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/plugin-triggers/" class="md-nav__link">
        Plugin triggers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/testing/" class="md-nav__link">
        Dokku test suite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/release-process/" class="md-nav__link">
        Release Process
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://pro.dokku.com/docs/getting-started/" class="md-nav__link">
        Pro
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://pro.dokku.com/blog/" class="md-nav__link">
        Blog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://dokku.dpdcart.com/cart/add?product_id=217344&method_id=236878" class="md-nav__link">
        Purchase Dokku Pro
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#checks" class="md-nav__link">
    Checks
  </a>
  
    <nav class="md-nav" aria-label="Checks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-instructions" class="md-nav__link">
    Check Instructions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-settings" class="md-nav__link">
    Check Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-docker-stop-timeout" class="md-nav__link">
    Configuring docker stop timeout
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-successful-rails-deployment" class="md-nav__link">
    Example: Successful Rails Deployment
  </a>
  
    <nav class="md-nav" aria-label="Example: Successful Rails Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checks-file" class="md-nav__link">
    CHECKS file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-output" class="md-nav__link">
    Deploy Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-failing-rails-deployment" class="md-nav__link">
    Example: Failing Rails Deployment
  </a>
  
    <nav class="md-nav" aria-label="Example: Failing Rails Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checks-file_1" class="md-nav__link">
    CHECKS file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-output_1" class="md-nav__link">
    Deploy Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/dokku/dokku/edit/master/docs/deployment/zero-downtime-deploys.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="zero-downtime-deploys">Zero Downtime Deploys</h1>
<div class="admonition tip">
<p class="admonition-title">New</p>
<p>Introduced in 0.5.0</p>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>checks &lt;app&gt;                                   # Show zero-downtime status
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>checks:disable &lt;app&gt; [process-type(s)]         # Disable zero-downtime deployment for all processes (or comma-separated process-type list) ***WARNING: this will cause downtime during deployments***
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>checks:enable &lt;app&gt; [process-type(s)]          # Enable zero-downtime deployment for all processes (or comma-separated process-type list)
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>checks:skip &lt;app&gt; [process-type(s)]            # Skip zero-downtime checks for all processes (or comma-separated process-type list)
</code></pre></div>
<p>Following a deploy, dokku will wait <code>10</code> seconds before routing traffic to the new container to give your application time to boot up. If the application is not running after this time, then the deploy is failed and your old container will continue serving traffic. You can modify this value globally or on a per-application basis:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>dokku config:set --global <span class="nv">DOKKU_DEFAULT_CHECKS_WAIT</span><span class="o">=</span><span class="m">30</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>dokku config:set node-js-app <span class="nv">DOKKU_DEFAULT_CHECKS_WAIT</span><span class="o">=</span><span class="m">30</span>
</code></pre></div>
<p>You can also choose to skip checks or disable zero-downtime completely on a per-application/per-process basis</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Note that <code>checks:disable</code> will now (as of 0.6.0) cause downtime for that process-type during deployments.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Shell</label><label for="__tabbed_1_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>dokku checks:skip node-js-app worker,web
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>-----&gt; Skipping zero downtime for app&#39;s (node-js-app) proctypes (worker,web)
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>-----&gt; Unsetting node-js-app
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>-----&gt; Unsetting DOKKU_CHECKS_DISABLED
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>-----&gt; Setting config vars
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>       DOKKU_CHECKS_SKIPPED: worker,web
</code></pre></div>
</div>
</div>
</div>
<p>Additionally, any given process can only be configured to disable zero-downtime. example:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Shell</label><label for="__tabbed_2_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>dokku checks:disable node-js-app worker
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>-----&gt; Disabling zero downtime for app&#39;s (node-js-app) proctypes (worker)
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>-----&gt; Setting config vars
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>       DOKKU_CHECKS_DISABLED: worker
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>-----&gt; Setting config vars
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>       DOKKU_CHECKS_SKIPPED: web
</code></pre></div>
</div>
</div>
</div>
<p>Dokku will wait <code>60</code> seconds before stopping the old container so that existing connections are given a chance to complete. You can modify this value globally or on a per-application basis:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>dokku config:set --global <span class="nv">DOKKU_WAIT_TO_RETIRE</span><span class="o">=</span><span class="m">120</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>dokku config:set &lt;app&gt; <span class="nv">DOKKU_WAIT_TO_RETIRE</span><span class="o">=</span><span class="m">120</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Note that during this time, multiple containers may be running on your server, which can be an issue for memory-hungry applications on memory-constrained servers.</p>
</div>
<h2 id="checks">Checks</h2>
<p>If your application needs a longer period to boot up - perhaps to load data into memory, or because of slow boot time - you may also use dokku's <code>checks</code> functionality to more precisely check whether an application can serve traffic or not.</p>
<p>Checks are run against the detected <code>web</code> process from your application's <code>Procfile</code>. For non-web processes, dokku will fallback to the aforementioned process uptime check.</p>
<p>To specify checks, add a <code>CHECKS</code> file to the root of your project directory. The <code>CHECKS</code> file should be plain text and may contain:</p>
<ul>
<li>Check instructions</li>
<li>Settings (NAME=VALUE)</li>
<li>Comments (lines starting with #)</li>
<li>Empty lines</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For dockerfile-based deploys, the file <em>must</em> be in <code>/app/CHECKS</code> within the container. <code>/app</code> is used by default as the root container directory for buildpack-based deploys.</p>
</div>
<h3 id="check-instructions">Check Instructions</h3>
<p>The format of a check instruction is a path or relative URL, optionally followed by the expected content:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>/about  Our Amazing Team
</code></pre></div>
<p>The <code>CHECKS</code> file can contain multiple checks:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>/                       My Amazing App
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>/stylesheets/index.css  .body
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>/scripts/index.js       $(function()
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>/images/logo.png
</code></pre></div>
<p>To check an application that supports multiple hostnames, use relative URLs that include the hostname:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>//admin.example.com  Admin Dashboard
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>//static.example.com/logo.png
</code></pre></div>
<p>You can also specify the protocol to explicitly check HTTPS requests:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>https://admin.example.com  Admin Dashboard
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>https://static.example.com/logo.png
</code></pre></div>
<h3 id="check-settings">Check Settings</h3>
<p>The default behavior is to wait for <code>5</code> seconds before running the checks, to timeout the checks after <code>30</code> seconds, and to attempt the checks <code>5</code> times. If the checks fail <code>5</code> times, the deployment is considered failed and the old container will continue serving traffic.</p>
<p>You can change the default behavior by setting <code>WAIT</code>, <code>TIMEOUT</code>, and <code>ATTEMPTS</code> to different values in the <code>CHECKS</code> file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>WAIT=30     # Wait 1/2 minute
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>TIMEOUT=60  # Timeout after a minute
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>ATTEMPTS=10 # Attempt checks 10 times
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>/  My Amazing App
</code></pre></div>
<p>You can also override the default <code>WAIT</code>, <code>TIMEOUT</code>, and <code>ATTEMPTS</code> variables for the global dokku installation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>dokku config:set --global <span class="nv">DOKKU_CHECKS_WAIT</span><span class="o">=</span><span class="m">30</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>dokku config:set --global <span class="nv">DOKKU_CHECKS_TIMEOUT</span><span class="o">=</span><span class="m">60</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>dokku config:set --global <span class="nv">DOKKU_CHECKS_ATTEMPTS</span><span class="o">=</span><span class="m">10</span>
</code></pre></div>
<p>If your application runs multiple processes (a background worker configured in your <code>Procfile</code>, for example) and you have checks to ensure that your web application has booted up, you may want to disable the default check wait time for that application to avoid the <code>10</code> second wait per non-web process:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>dokku config:set &lt;app&gt; <span class="nv">DOKKU_DEFAULT_CHECKS_WAIT</span><span class="o">=</span><span class="m">0</span>
</code></pre></div>
<h3 id="configuring-docker-stop-timeout">Configuring docker stop timeout</h3>
<p><a href="https://docs.docker.com/engine/reference/commandline/stop/">By default</a>, docker will wait 10 seconds from the time the <code>stop</code> command is passed to a container before it attempts to kill said container. This timeout can be configured on a per-app basis in dokku by setting the <code>DOKKU_DOCKER_STOP_TIMEOUT</code> configuration variable. This timeout applies to normal zero-downtime deployments as well as the <code>ps:stop</code> and <code>apps:destroy</code> commands.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>dokku config:set <span class="nv">$APP</span> <span class="nv">DOKKU_DOCKER_STOP_TIMEOUT</span><span class="o">=</span><span class="m">20</span>
</code></pre></div>
<h2 id="example-successful-rails-deployment">Example: Successful Rails Deployment</h2>
<p>In this example, a Rails application is successfully deployed to dokku. The initial round of checks fails while the server is starting, but once it starts they succeed and the deployment is successful. <code>WAIT</code> is set to <code>10</code> because our application takes a while to boot up. <code>ATTEMPTS</code> is set to <code>6</code>, but the third attempt succeeds.</p>
<h3 id="checks-file">CHECKS file</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>WAIT=10
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>ATTEMPTS=6
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>/check.txt  simple_check
</code></pre></div>
<p>For this check to work, we've added a line to <code>config/routes.rb</code> that simply returns a string:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>get &#39;/check.txt&#39;, to: proc {[200, {}, [&#39;simple_check&#39;]]}
</code></pre></div>
<h3 id="deploy-output">Deploy Output</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output has been trimmed for brevity</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Shell</label><label for="__tabbed_3_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>git push dokku master
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>-----&gt; Cleaning up...
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>-----&gt; Building myapp from herokuish...
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>-----&gt; Adding BUILD_ENV to build environment...
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>-----&gt; Ruby app detected
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>-----&gt; Compiling Ruby/Rails
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>-----&gt; Using Ruby version: ruby-2.0.0
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>.....
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>-----&gt; Discovering process types
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>       Procfile declares types -&gt; web
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>-----&gt; Releasing myapp...
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>-----&gt; Deploying myapp...
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>-----&gt; Running pre-flight checks
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>-----&gt; Attempt 1/6 Waiting for 10 seconds ...
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>       CHECKS expected result:
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>       http://localhost/check.txt =&gt; &quot;simple_check&quot;
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a> !
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>curl: (7) Failed to connect to 172.17.0.155 port 5000: Connection refused
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a> !    Check attempt 1/6 failed.
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>-----&gt; Attempt 2/6 Waiting for 10 seconds ...
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>       CHECKS expected result:
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>       http://localhost/check.txt =&gt; &quot;simple_check&quot;
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a> !
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>curl: (7) Failed to connect to 172.17.0.155 port 5000: Connection refused
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a> !    Check attempt 2/6 failed.
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>-----&gt; Attempt 3/6 Waiting for 10 seconds ...
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>       CHECKS expected result:
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>       http://localhost/check.txt =&gt; &quot;simple_check&quot;
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>-----&gt; All checks successful!
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>=====&gt; myapp container output:
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>       =&gt; Booting Thin
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>       =&gt; Rails 4.2.0 application starting in production on http://0.0.0.0:5000
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>       =&gt; Run `rails server -h` for more startup options
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>       =&gt; Ctrl-C to shutdown server
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>       Thin web server (v1.6.3 codename Protein Powder)
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>       Maximum connections set to 1024
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>       Listening on 0.0.0.0:5000, CTRL+C to stop
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a>=====&gt; end myapp container output
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a>-----&gt; Running post-deploy
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>-----&gt; Configuring myapp.dokku.example.com...
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a>-----&gt; Creating http nginx.conf
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a>-----&gt; Running nginx-pre-reload
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a>       Reloading nginx
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>-----&gt; Shutting down old container in 60 seconds
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a>=====&gt; Application deployed:
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a>       http://myapp.dokku.example.com
</code></pre></div>
</div>
</div>
</div>
<h2 id="example-failing-rails-deployment">Example: Failing Rails Deployment</h2>
<p>In this example, a Rails application fails to deploy. The reason for the failure is that the postgres database connection fails. The initial checks will fail while we wait for the server to start up, just like in the above example. However, once the server does start accepting connections, we will see an error 500 due to the postgres database connection failure.</p>
<p>Once the attempts have been exceeded, the deployment fails and we see the container output, which shows the Postgres connection errors.</p>
<h3 id="checks-file_1">CHECKS file</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>WAIT=10
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>ATTEMPTS=6
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>/
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The check to the root url '/' would normally access the database.</p>
</div>
<h3 id="deploy-output_1">Deploy Output</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output has been trimmed for brevity</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Shell</label><label for="__tabbed_4_2">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>git push dokku master
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>-----&gt; Cleaning up...
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>-----&gt; Building myapp from herokuish...
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>-----&gt; Adding BUILD_ENV to build environment...
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>-----&gt; Ruby app detected
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>-----&gt; Compiling Ruby/Rails
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>-----&gt; Using Ruby version: ruby-2.0.0
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>.....
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>Discovering process types
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>Procfile declares types -&gt; web
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>Releasing myapp...
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>Deploying myapp...
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>Running pre-flight checks
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>-----&gt; Attempt 1/6 Waiting for 10 seconds ...
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>       CHECKS expected result:
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>       http://localhost/ =&gt; &quot;&quot;
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a> !
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>curl: (7) Failed to connect to 172.17.0.188 port 5000: Connection refused
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a> !    Check attempt 1/6 failed.
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>-----&gt; Attempt 2/6 Waiting for 10 seconds ...
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a>       CHECKS expected result:
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a>       http://localhost/ =&gt; &quot;&quot;
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a> !
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>curl: (7) Failed to connect to 172.17.0.188 port 5000: Connection refused
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a> !    Check attempt 2/6 failed.
<a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a>-----&gt; Attempt 3/6 Waiting for 10 seconds ...
<a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a>       CHECKS expected result:
<a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a>       http://localhost/ =&gt; &quot;&quot;
<a id="__codelineno-21-30" name="__codelineno-21-30" href="#__codelineno-21-30"></a> !
<a id="__codelineno-21-31" name="__codelineno-21-31" href="#__codelineno-21-31"></a>curl: (22) The requested URL returned error: 500 Internal Server Error
<a id="__codelineno-21-32" name="__codelineno-21-32" href="#__codelineno-21-32"></a> !    Check attempt 3/6 failed.
<a id="__codelineno-21-33" name="__codelineno-21-33" href="#__codelineno-21-33"></a>-----&gt; Attempt 4/6 Waiting for 10 seconds ...
<a id="__codelineno-21-34" name="__codelineno-21-34" href="#__codelineno-21-34"></a>       CHECKS expected result:
<a id="__codelineno-21-35" name="__codelineno-21-35" href="#__codelineno-21-35"></a>       http://localhost/ =&gt; &quot;&quot;
<a id="__codelineno-21-36" name="__codelineno-21-36" href="#__codelineno-21-36"></a> !
<a id="__codelineno-21-37" name="__codelineno-21-37" href="#__codelineno-21-37"></a>curl: (22) The requested URL returned error: 500 Internal Server Error
<a id="__codelineno-21-38" name="__codelineno-21-38" href="#__codelineno-21-38"></a> !    Check attempt 4/6 failed.
<a id="__codelineno-21-39" name="__codelineno-21-39" href="#__codelineno-21-39"></a>-----&gt; Attempt 5/6 Waiting for 10 seconds ...
<a id="__codelineno-21-40" name="__codelineno-21-40" href="#__codelineno-21-40"></a>       CHECKS expected result:
<a id="__codelineno-21-41" name="__codelineno-21-41" href="#__codelineno-21-41"></a>       http://localhost/ =&gt; &quot;&quot;
<a id="__codelineno-21-42" name="__codelineno-21-42" href="#__codelineno-21-42"></a> !
<a id="__codelineno-21-43" name="__codelineno-21-43" href="#__codelineno-21-43"></a>curl: (22) The requested URL returned error: 500 Internal Server Error
<a id="__codelineno-21-44" name="__codelineno-21-44" href="#__codelineno-21-44"></a> !    Check attempt 5/6 failed.
<a id="__codelineno-21-45" name="__codelineno-21-45" href="#__codelineno-21-45"></a>-----&gt; Attempt 6/6 Waiting for 10 seconds ...
<a id="__codelineno-21-46" name="__codelineno-21-46" href="#__codelineno-21-46"></a>       CHECKS expected result:
<a id="__codelineno-21-47" name="__codelineno-21-47" href="#__codelineno-21-47"></a>       http://localhost/ =&gt; &quot;&quot;
<a id="__codelineno-21-48" name="__codelineno-21-48" href="#__codelineno-21-48"></a> !
<a id="__codelineno-21-49" name="__codelineno-21-49" href="#__codelineno-21-49"></a>curl: (22) The requested URL returned error: 500 Internal Server Error
<a id="__codelineno-21-50" name="__codelineno-21-50" href="#__codelineno-21-50"></a>Could not start due to 1 failed checks.
<a id="__codelineno-21-51" name="__codelineno-21-51" href="#__codelineno-21-51"></a> !    Check attempt 6/6 failed.
<a id="__codelineno-21-52" name="__codelineno-21-52" href="#__codelineno-21-52"></a>=====&gt; myapp container output:
<a id="__codelineno-21-53" name="__codelineno-21-53" href="#__codelineno-21-53"></a>       =&gt; Booting Thin
<a id="__codelineno-21-54" name="__codelineno-21-54" href="#__codelineno-21-54"></a>       =&gt; Rails 4.2.0 application starting in production on http://0.0.0.0:5000
<a id="__codelineno-21-55" name="__codelineno-21-55" href="#__codelineno-21-55"></a>       =&gt; Run `rails server -h` for more startup options
<a id="__codelineno-21-56" name="__codelineno-21-56" href="#__codelineno-21-56"></a>       =&gt; Ctrl-C to shutdown server
<a id="__codelineno-21-57" name="__codelineno-21-57" href="#__codelineno-21-57"></a>       Thin web server (v1.6.3 codename Protein Powder)
<a id="__codelineno-21-58" name="__codelineno-21-58" href="#__codelineno-21-58"></a>       Maximum connections set to 1024
<a id="__codelineno-21-59" name="__codelineno-21-59" href="#__codelineno-21-59"></a>       Listening on 0.0.0.0:5000, CTRL+C to stop
<a id="__codelineno-21-60" name="__codelineno-21-60" href="#__codelineno-21-60"></a>       Started GET &quot;/&quot; for 172.17.42.1 at 2015-03-26 21:36:47 +0000
<a id="__codelineno-21-61" name="__codelineno-21-61" href="#__codelineno-21-61"></a>         Is the server running on host &quot;172.17.42.1&quot; and accepting
<a id="__codelineno-21-62" name="__codelineno-21-62" href="#__codelineno-21-62"></a>         TCP/IP connections on port 5431?
<a id="__codelineno-21-63" name="__codelineno-21-63" href="#__codelineno-21-63"></a>       PG::ConnectionBad (could not connect to server: Connection refused
<a id="__codelineno-21-64" name="__codelineno-21-64" href="#__codelineno-21-64"></a>         Is the server running on host &quot;172.17.42.1&quot; and accepting
<a id="__codelineno-21-65" name="__codelineno-21-65" href="#__codelineno-21-65"></a>         TCP/IP connections on port 5431?
<a id="__codelineno-21-66" name="__codelineno-21-66" href="#__codelineno-21-66"></a>       ):
<a id="__codelineno-21-67" name="__codelineno-21-67" href="#__codelineno-21-67"></a>         vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `initialize&#39;
<a id="__codelineno-21-68" name="__codelineno-21-68" href="#__codelineno-21-68"></a>         vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `new&#39;
<a id="__codelineno-21-69" name="__codelineno-21-69" href="#__codelineno-21-69"></a>         vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `connect&#39;
<a id="__codelineno-21-70" name="__codelineno-21-70" href="#__codelineno-21-70"></a>         vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql_adapter.rb:242:in `initialize&#39;
<a id="__codelineno-21-71" name="__codelineno-21-71" href="#__codelineno-21-71"></a>         vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql_adapter.rb:44:in `new&#39;
<a id="__codelineno-21-72" name="__codelineno-21-72" href="#__codelineno-21-72"></a>         vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql_adapter.rb:44:in `postgresql_connection
<a id="__codelineno-21-73" name="__codelineno-21-73" href="#__codelineno-21-73"></a>=====&gt; end myapp container output
<a id="__codelineno-21-74" name="__codelineno-21-74" href="#__codelineno-21-74"></a>/usr/bin/dokku: line 49: 23409 Killed                  dokku deploy &quot;$APP&quot;
<a id="__codelineno-21-75" name="__codelineno-21-75" href="#__codelineno-21-75"></a>To dokku@dokku.example.com:myapp
<a id="__codelineno-21-76" name="__codelineno-21-76" href="#__codelineno-21-76"></a> ! [remote rejected] dokku -&gt; master (pre-receive hook declined)
<a id="__codelineno-21-77" name="__codelineno-21-77" href="#__codelineno-21-77"></a>error: failed to push some refs to &#39;dokku@dokku.example.com:myapp&#39;
</code></pre></div>
</div>
</div>
</div>




              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../user-management/" class="md-footer__link md-footer__link--prev" aria-label="Previous: User Management" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              User Management
            </div>
          </div>
        </a>
      
      
        
        <a href="../methods/buildpacks/" class="md-footer__link md-footer__link--next" aria-label="Next: Buildpack Deployment" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Buildpack Deployment
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/dokku/dokku/issues" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M352 96v3.56c0 15.74-12.7 28.44-28.4 28.44H188.4c-15.7 0-29.3-12.7-29.3-28.44V96c0-53.02 43-96 96-96C309 0 352 42.98 352 96zm-310.63 9.4c12.5-12.52 32.76-12.52 45.26 0l63.97 64c.7.6 1.3 1.3 1.9 2 14.3-7.3 30.4-11.4 46.6-11.4H312c17.1 0 33.2 4.1 47.5 11.4.6-.7 1.2-1.4 1.9-2l64-64c12.5-12.52 32.7-12.52 45.2 0 12.5 12.5 12.5 32.7 0 45.2l-64 64c-1.5.7-1.3 1.3-2 1.9 6.1 12 10 25.4 11.1 39.5H480c17.7 0 32 14.3 32 32s-14.3 32-32 32h-64c0 24.6-5.5 47.8-15.4 68.6 2.1 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.7 0 45.2s-32.7 12.5-45.2 0l-63.1-63c-24.5 21.8-55.8 36.2-90.3 39.6V240c0-8.8-7.2-16-16.9-16-7.9 0-16 7.2-16 16v239.2c-33.6-3.4-64.9-17.8-89.4-39.6l-63.07 63c-12.5 12.5-32.76 12.5-45.26 0-12.49-12.5-12.49-32.7 0-45.2l64.03-64c1.8-1.9 3.9-3.5 6-4.8-9.9-20.8-15.4-44-15.4-68.6H32c-17.67 0-32-14.3-32-32s14.33-32 32-32h64.3c1.08-14.1 5-27.5 11.1-39.5-.7-.6-1.4-1.2-2-1.9l-64.03-64c-12.49-12.5-12.49-32.7 0-45.2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://dokku.dpdcart.com/cart/add?product_id=217344&method_id=236878" target="_blank" rel="noopener" title="dokku.dpdcart.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M96 0c11.5 0 21.4 8.19 23.6 19.51L121.1 32h420.7c20.3 0 36.5 20.25 30.8 40.66l-54 192.04c-3.9 13.8-16.5 23.3-30.8 23.3H170.7l9.2 48H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H159.1c-10.6 0-20.5-8.2-22.7-19.5L76.14 48H24C10.75 48 0 37.25 0 24S10.75 0 24 0h72zm32 464c0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48-48-21.5-48-48zm384 0c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "search.highlight"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
  
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    

  <!-- Extra JavaScript (can't be set in mkdocs.yml due to content hash) -->
  <script src="../../overrides/assets/javascripts/bundle.js"></script>

  </body>
</html>